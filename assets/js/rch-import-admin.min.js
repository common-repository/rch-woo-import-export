"use strict";function rch_set_local_file_uploader(){var e=new plupload.Uploader({runtimes:"html5,silverlight,flash,html4",url:rchPluginSettings.rchAjaxURL,drop_element:"rch_upload_drag_drop",chunk_size:"1024kb",file_data_name:"local_file",multiple_queues:!1,multi_selection:!1,max_file_size:"100Gb",browse_button:"plupload_browse_button",container:"rch_upload_container",filters:{prevent_duplicates:!1},multipart_params:{action:"rch_import_local_upload_file",rch_import_id:rchPluginSettings.rchImportId},flash_swf_url:"plupload.flash.swf",silverlight_xap_url:"plupload.silverlight.xap"});e.bind("BeforeUpload",function(i,t){e.settings.multipart_params.rch_import_id=rchPluginSettings.rchImportId}),e.bind("Init",function(e){var i=jQuery("#rch_upload_container");e.features.dragdrop?(i.addClass("rch_drag_drop"),jQuery("#rch_upload_container").bind("dragover.wp_uploader",function(){i.addClass("rch_drag_over")}).bind("dragleave.wp_uploader, drop.wp_uploader",function(){i.removeClass("rch_drag_over")})):(i.removeClass("drag_drop"),jQuery(".rch_upload_drag_drop").unbind(".wp_uploader"))}),e.init(),e.bind("FilesAdded",function(e,i){jQuery(".rch_upload_container_wrapper .rch_file_list_wrapper").html(""),jQuery(".rch_upload_drag_drop_data").attr("rch_status","processing"),jQuery(".rch_local_uploaded_filename_label").text(rchPluginSettings.rchLocalizeText.rchUploadingText);var t="",p=!0;if(jQuery.each(i,function(e,i){var a=i.name.split(".").pop().toLowerCase();if(-1==jQuery.inArray(a,["txt","zip","json","xml","xls","xlsx","csv"]))return p=!1,!1;t+=i.name+" ( "+plupload.formatSize(i.size)+" ) "}),!p)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.invalidFileExtensionText),!1;jQuery(".rch_local_uploaded_filename").text(t),e.start()}),e.bind("UploadProgress",function(e,i){jQuery(".rch_uploaded_file_list_wrapper").show(),jQuery(".rch_import_upload_process_per").css("width",i.percent+"%").html(i.percent+"%")}),e.bind("FileUploaded",function(e,i,t){if(jQuery(".rch_import_ref_id").val(""),null===t||void 0===t.response||null===t.response)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.invalidFileExtensionText),!1;var p=jQuery.parseJSON(t.response);if("error"==p.status)return rchSetErrorMsg(p.message),!1;rchPluginSettings.importData[rchPluginSettings.rchImportId]=[],rchSetFileData(p)}),e.bind("Error",function(e,i){if(jQuery(".rch_uploaded_file_list").hide(),void 0!==i.code&&-601==i.code)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.invalidFileExtensionText),!1;rchHandleAjaxError(i,"")})}function rchProcessingReimport(e,i,t){rchSetProcessLoader({processingReimport:rchPluginSettings.rchLocalizeText.processingReimport}),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_process_reimport&import_id="+e+"&nonce="+i+"&ref_id="+t,dataType:"json",async:!0,success:function(e){if(rchUpdateProcessLoader("processingReimport"),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetFileData(e)},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchSetFileData(e){if(0==rchPluginSettings.rchImportId&&void 0!==e.rch_import_id&&null!==e.rch_import_id&&(rchPluginSettings.rchImportId=e.rch_import_id),void 0!==e.file_list&&null!==e.file_list){if(0==e.file_count)return jQuery(".rch_upload_section_wrapper:visible .rch_file_list_wrapper").html(""),rchSetErrorMsg(e.message),!1;rchHandleFileList(e.file_list,".rch_upload_section_wrapper:visible")}jQuery(".rch_upload_section_wrapper:visible .rch_local_uploaded_filename_label").text(rchPluginSettings.rchLocalizeText.rchUploadCompleteText);var i=jQuery(".rch_upload_section_wrapper:visible .rch_upload_file_list:checked").val();rchPluginSettings.importData.activeFile=i,void 0===rchPluginSettings.importData[i]&&(rchPluginSettings.importData[i]=[]),rchPluginSettings.importData[i].fileType="",rchPluginSettings.importData[i].fileName="",void 0!==e.file_name&&(rchPluginSettings.importData[i].fileName=e.file_name,rchPluginSettings.importData[i].fileType=e.file_name.substr(e.file_name.lastIndexOf(".")+1)),rchPluginSettings.importData[i].fileSize="0kb",void 0!==e.file_size&&(rchPluginSettings.importData[i].fileSize=plupload.formatSize(e.file_size)),(rchPluginSettings.importData[i].fileType="csv")?jQuery(".rch_csv_delimiter_wrapper").show():jQuery(".rch_csv_delimiter_wrapper").hide(),rchSetProcessLoader({rchValidateUpload:rchPluginSettings.rchLocalizeText.rchParingUploadFileText,rchGetTemplates:rchPluginSettings.rchLocalizeText.rchGetTemplatesText,rchGetConfig:rchPluginSettings.rchLocalizeText.rchGetConfigText,rchGetFields:rchPluginSettings.rchLocalizeText.rchGetFieldsText,rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText}),rchValidateUploadedFile(!1,","),rchImportGetTemplates()}function rchSetProcessLoader(e){var i="";jQuery.each(e,function(e,t){i+='<div class="rch_task_wrapper '+e+'" >',i+='<div class="rch_task_icon_wrapper rch_task_processing_icon"><i class="fas fa-spinner fa-spin rch_spinner_btn_icon"></i></div>',i+='<div class="rch_task_icon_wrapper rch_task_completed_icon"><i class="fas fa-check-circle rch_general_btn_icon " aria-hidden="true"></i></div>',i+='<div class="rch_task_title">'+t+"</div>",i+="</div>"}),jQuery(".rch_task_list").html(i),jQuery(".rch_processing_data").modal({backdrop:"static",keyboard:!1,show:!0})}function rchUpdateProcessLoader(e){if(jQuery("."+e).addClass("task_completed"),!jQuery(".rch_task_list").find(".rch_task_wrapper:not(.task_completed)").length){jQuery(".rch_processing_data").modal("hide");var i=setInterval(function(){jQuery(".rch_processing_data").hasClass("show")?jQuery(".rch_processing_data").modal("hide"):clearInterval(i)},1e3)}}function rchValidateUploadedFile(e,i){var t=rchPluginSettings.importData.activeFile;void 0===rchPluginSettings.importData[t]&&(rchPluginSettings.importData[t]=[]),e||void 0===rchPluginSettings.importData[t].count?jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_validate_uploads&rch_import_id="+rchPluginSettings.rchImportId+"&activeFile="+t+"&rch_csv_delimiter="+i,dataType:"json",async:!0,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;rchUpdateProcessLoader("rchValidateUpload"),jQuery(".rch_import_step1_btn").show(),jQuery(document).trigger("rchValidUploadFile"),rchGetConfig()},error:function(e,i){rchHandleAjaxError(e,i)}}):(rchUpdateProcessLoader("rchValidateUpload"),jQuery(".rch_import_step1_btn").show(),jQuery(document).trigger("rchValidUploadFile"),rchGetConfig())}function rchGetConfig(){void 0===rchPluginSettings.importData[rchPluginSettings.rchImportId]&&(rchPluginSettings.importData[rchPluginSettings.rchImportId]=[]),void 0!==rchPluginSettings.importData[rchPluginSettings.rchImportId].config?(rchUpdateProcessLoader("rchGetConfig"),rchConfigImport()):jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_get_config&import_id="+rchPluginSettings.rchImportId,dataType:"json",async:!0,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;rchUpdateProcessLoader("rchGetConfig"),void 0!==e.config?rchPluginSettings.importData[rchPluginSettings.rchImportId].config=e.config:rchPluginSettings.importData[rchPluginSettings.rchImportId].config={},rchConfigImport()},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchConfigImport(){var e=rchPluginSettings.importData[rchPluginSettings.rchImportId].config;rchPluginSettings.importData[rchPluginSettings.rchImportId].changeConfig=!0,void 0!==e.import_type&&""!=e.import_type&&(jQuery(".rch_import_type_select").val()!=e.import_type&&(jQuery(".rch_import_type_select").val(e.import_type).trigger("chosen:updated"),rchImportGetTemplates()),"taxonomies"!=e.import_type?jQuery(".rch_taxonomies_types_wrapper").hide():jQuery(".rch_taxonomies_types_wrapper").show(),"taxonomies"==e.import_type&&void 0!==e.import_sub_type&&""!=e.import_type&&jQuery(".rch_taxonomies_types_select").val()!=e.import_sub_type&&jQuery(".rch_taxonomies_types_select").val(e.import_sub_type).trigger("change").trigger("chosen:updated")),rchGetImportFields(jQuery(".rch_import_type_select").val()),rchGetFilteredRecords(0,1,"","",!0)}function rchSetTemplate(e){if("object"==typeof e&&!jQuery.isEmptyObject(e)){rchSetCF(e),rchSetTaxonomy(e),jQuery(document).trigger("rchChangeTemplate",[e]),jQuery(".rch_item_update_field").prop("checked",!1),jQuery.each(e,function(e,i){if(e.match("^rch_item_cf")||e.match("^rch_item_acf")||e.match("^rch_item_taxonomy")||e.match("^rch_item_set_taxonomy")||!(e.match("^rch_item_")||e.match("^rch_existing_item")||e.match("^is_update_item")))return!0;if(jQuery("."+e).length)if(jQuery("."+e).first().is(".rch_radio,.rch_checkbox")){var t=!0;jQuery.each(jQuery("."+e),function(e){"as_specified"!==i&&jQuery(this).val()==i?(jQuery(this).prop("checked",!0),t=!1):jQuery(this).prop("checked",!1)}),!0===t?(jQuery("."+e+"_as_specified").prop("checked",!0).trigger("change"),jQuery("."+e+"_as_specified_data").val(i)):(jQuery("."+e+"_as_specified").prop("checked",!1).trigger("change"),jQuery("."+e+"_as_specified_data").val(""))}else if(jQuery("."+e).first().is(".rch_content_data_select")){t=!0;jQuery.each(jQuery("."+e+" option"),function(e){if(jQuery(this).attr("value")==i)return t=!1,!1}),t?(jQuery("."+e).val("as_specified").trigger("chosen:updated").trigger("change"),jQuery("."+e+"_as_specified_wrapper").show(),jQuery("."+e+"_as_specified_data").val(i)):(jQuery("."+e).val(i).trigger("chosen:updated").trigger("change"),jQuery("."+e+"_as_specified_wrapper").hide(),jQuery("."+e+"_as_specified_data").val(""))}else jQuery("."+e).val(i)});jQuery.each(["rch_item_search_existing_images","rch_item_keep_images","rch_item_first_imaege_is_featured","rch_item_unsuccess_set_draft","rch_item_set_image_title","rch_item_set_image_caption","rch_item_set_image_alt","rch_item_set_image_description","rch_item_image_rename","rch_item_change_ext","rch_item_attachement_search_for_existing"],function(i,t){void 0===e[t]&&jQuery("."+t).prop("checked",!1)}),jQuery(document).trigger("rchAfterChangeTemplate",[e]),rchSetToolTip()}rchUpdateProcessLoader("rchChangeTemplates")}function rchSetToolTip(){jQuery.isFunction(jQuery.fn.tipso)&&jQuery(".rch_data_tipso").length&&jQuery(".rch_data_tipso").tipso({useTitle:!1,background:"rgba(0,0,0,0.8)",color:"#ffffff",size:"small",tooltipHover:!0})}

function rchValidateProcess(){return 1;}function rchGetImportFields(e){void 0!==rchPluginSettings.importData[e]&&void 0!==rchPluginSettings.importData[e].fields?(jQuery(".rch_field_mapping_section").html(rchPluginSettings.importData[e].fields),jQuery(".rch_field_mapping_section").find(".rch_content_data_select").chosen(),void 0!==rchPluginSettings.importData[e].searchFields&&jQuery(".rch_search_item_wrapper").html(rchPluginSettings.importData[e].searchFields),void 0!==rchPluginSettings.importData[e].updateFields&&jQuery(".rch_update_item_wrapper").html(rchPluginSettings.importData[e].updateFields),rchUpdateProcessLoader("rchGetFields"),rchChangeConfig()):jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_get_fields&type="+e,dataType:"json",async:!0,success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;rchUpdateProcessLoader("rchGetFields"),void 0===rchPluginSettings.importData[e]&&(rchPluginSettings.importData[e]=[]),void 0!==i.fields&&(rchPluginSettings.importData[e].fields=i.fields,jQuery(".rch_field_mapping_section").html(i.fields),jQuery(".rch_field_mapping_section").find(".rch_content_data_select").chosen()),void 0!==i.search_fields&&(rchPluginSettings.importData[e].searchFields=i.search_fields,jQuery(".rch_search_item_wrapper").html(i.search_fields)),void 0!==i.update_fields&&(rchPluginSettings.importData[e].updateFields=i.update_fields,jQuery(".rch_update_item_wrapper").html(i.update_fields)),rchChangeConfig()},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchChangeConfig(){if(void 0!==rchPluginSettings.importData[rchPluginSettings.rchImportId]&&void 0!==rchPluginSettings.importData[rchPluginSettings.rchImportId].changeConfig&&1==rchPluginSettings.importData[rchPluginSettings.rchImportId].changeConfig){rchPluginSettings.importData[rchPluginSettings.rchImportId].changeConfig=!1;var e=rchPluginSettings.importData[rchPluginSettings.rchImportId].config;jQuery(document).trigger("rchChangeConfig",[e.fields]),void 0!==e.fields&&rchSetTemplate(e.fields)}rchSetToolTip()}function rchGetFilteredRecords(e,i,t,p,a){jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_import_get_filtered_records&rch_import_id="+rchPluginSettings.rchImportId+"&start="+e+"&length="+i+"&xpath="+t+"&root="+p,dataType:"json",success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;jQuery(".rch_element_nav_element").val(e+1);var r=rchPluginSettings.importData.activeFile;if(void 0!==i.count&&(rchPluginSettings.importData[r].count=i.count,jQuery(".rch_data_element_action_nav_total").html(i.count)),(""==t||a)&&void 0!==i.xpath){var n=i.xpath.substring(1);rchPluginSettings.importData[r].xpath=n,jQuery(".rch_xpath").val(n)}""!=p&&!a||void 0===i.root||(rchPluginSettings.importData[r].root=i.root),void 0!==i.filter_element&&(rchPluginSettings.importData[r].node_list=i.filter_element,jQuery(".rch_element_list").html("").append(jQuery("<option></option>").val("").text(rchPluginSettings.rchLocalizeText.selectElementText)),jQuery.each(i.filter_element,function(e,i){jQuery(".rch_element_list").append(jQuery("<option></option>").val(i).text(i))}),jQuery(".rch_element_list").val("").trigger("chosen:updated"));var o="",s=!0;if(void 0===i.file_type||"csv"!=i.file_type&&"xls"!=i.file_type&&"xlsx"!=i.file_type){if(jQuery(".rch_element_tag_outer").show(),void 0!==i.node_list&&!jQuery.isEmptyObject(i.node_list)){var _="";jQuery.each(i.node_list,function(e,i){if(rchPluginSettings.importData[r].root==e)var t="rch_active";else t="";_+='<div class="rch_layout_tag_wrapper '+t+'"><div class="rch_layout_tag_name">'+e+'</div><div class="rch_layout_tag_count">'+i+"</div></div>"}),jQuery(".rch_element_tag_wrapper").html(_),rchPluginSettings.importData[r].node_list=i.node_list}void 0!==i.content&&jQuery.each(i.content,function(e,i){o+=rchGenerateXmlTagView(i)})}else s=!1,jQuery(".rch_element_tag_outer").hide(),void 0!==i.content&&jQuery.each(i.content,function(e,i){o+=rchGenerateTableView(i)});jQuery(".rch_data_preview").html(o),jQuery(".rch_data_fields_container").html(o),s?jQuery(".rch_field_mapping_data_wrapper .rch_data_fields_container").find(".rch_tag.rch_opening:not(.rch_tag_has_child) .rch_tag_name,.rch_tag_attr_name").rchInsertAtCaret():jQuery(".rch_data_fields_container").find(".rch_tag_table_header_data").rchInsertAtCaret(),rchPluginSettings.importData[r].content=i.content,rchUpdateProcessLoader("rchGetRecords"),0==rchPluginSettings.importData[r].count&&rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchNoRecordsFoundText)},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchHandleAjaxError(e,i){return rchSetErrorMsg(0===e.status?rchPluginSettings.rchLocalizeText.rch_ajax_not_connect_error:400==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_400_error:404==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_404_error:500==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_internal_server_error:"parsererror"===i?rchPluginSettings.rchLocalizeText.rch_ajax_jason_parse_error:"timeout"===i?rchPluginSettings.rchLocalizeText.rch_ajax_time_out_error:"abort"===i?rchPluginSettings.rchLocalizeText.rch_ajax_request_aborted_error:rchPluginSettings.rchLocalizeText.rch_ajax_uncaught_error+e.responseText),!1}function rchSetErrorMsg(e){rchHideLoader(),jQuery(".rch_error_content").html(e),jQuery(".rch_error_model").modal({backdrop:!0,show:!0})}function rchSetSuccessMsg(e){jQuery.notify({message:'<i class="far fa-check-circle"></i> '+e},{type:"success",placement:{align:"right",from:"bottom"},animate:{enter:"animated fadeInUp",exit:"animated fadeOutDown"}})}function rchHandleFileList(e,i){var t='<div class="rch_file_list_header">'+rchPluginSettings.rchLocalizeText.rchChooseFileText+'</div><div class="rch_file_list_container">',p=!0,a=(jQuery(".rch_upload_type").val(),"");jQuery.each(e,function(e,i){if(1==p){p=!1;var r='checked="checked"';a=e}else r="";t+='<div class="rch_file_list_element" ><input class="rch_file_list rch_upload_file_list rch_radio"  type="radio" id="'+i.fileKey+'" value="'+i.fileKey+'" name="rch_import_local_upload" '+r+'><label class="rch_file_list_data rch_radio_label"  for="'+i.fileKey+'">'+i.fileName+"</label></div>"}),t+="</div>",jQuery(i).find(".rch_file_list_wrapper").html(t),jQuery(i).find(".rch_upload_finalFile").val(a)}function rchShowLoader(){jQuery(".rch_loader").removeClass("rch_hidden")}function rchHideLoader(){jQuery(".rch_loader").addClass("rch_hidden")}function rchValidateImportExt(){var e=jQuery(".rch_import_type_select").val(),i=!0,t="";return"users"==e?rchPluginSettings.rchExtensions.indexOf("rch_user_import")<0&&(t=rchPluginSettings.rchLocalizeText.rchImportUserExtDisableText,i=!1):"shop_customer"==e?rchPluginSettings.rchExtensions.indexOf("rch_wc_import")<0?(t=rchPluginSettings.rchLocalizeText.rchImportWCExtDisableText,i=!1):rchPluginSettings.rchExtensions.indexOf("rch_user_import")<0&&(t=rchPluginSettings.rchLocalizeText.rchImportUserExtDisableText,i=!1):"shop_order"!=e&&"shop_coupon"!=e&&"product"!=e||rchPluginSettings.rchExtensions.indexOf("rch_wc_import")<0&&(t=rchPluginSettings.rchLocalizeText.rchImportWCExtDisableText,i=!1),0!=i||(jQuery(".rch_import_type_select").val("post").trigger("chosen:updated"),"taxonomies"==e?jQuery(".rch_taxonomies_types_wrapper").slideDown():jQuery(".rch_taxonomies_types_wrapper").slideUp(),rchSetErrorMsg(t),!1)}function rchGotoRecord(e){var i=rchPluginSettings.importData.activeFile,t=rchPluginSettings.importData[i].root,p=rchPluginSettings.importData[i].xpath,a=rchPluginSettings.importData[i].count;e>=1&&e<=a?rchGetFilteredRecords(e-1,1,p,t,!1):rchUpdateProcessLoader("rchGetRecords")}function rchGenerateTableView(e){var i='<table class="rch_import_data_preview table table-striped table-bordered" width="100%" cellspacing="0"><thead>';return"object"==typeof e&&null!==e&&"object"==typeof e.value&&null!==e.value&&jQuery.each(e.value,function(e,t){var p=void 0!==t.path?t.path:"",a=void 0!==t.name?t.name:"",r=void 0!==t.value?t.value:"";i+='<tr><th  class="rch_tag_header_wrapper"><div data_value="'+p+'" class="rch_tag_table_header_data">'+a+'</div></th><td class="rch_tag_contant_data_wrapper"><div class="rch_tag_table_contant_data">'+r+"</div></td></tr>"}),i+="</tr></thead><tbody></tbody></table>"}function rchGenerateXmlTagView(e){var i="";if("object"==typeof e&&null!==e){var t="",p="",a="";p="";"object"==typeof e.value&&null!==e.value?(jQuery.each(e.value,function(e,i){t+=rchGenerateXmlTagView(i)}),a=" rch_tag_section_container",p=" rch_tag_has_child"):void 0!==e.value&&(t+=e.value);var r=e.name,n=e.path,o="";"object"!=typeof e["@attributes"]||null===e["@attributes"]||jQuery.isEmptyObject(e["@attributes"])||jQuery.each(e["@attributes"],function(e,i){o+='<span class="rch_tag_attr" >',o+='<span class="rch_tag_attr_name" data_value="'+n+"/@"+e+'"> '+e+'</span> = <span class="rch_tag_attr_value">"'+i+'" </span>',o+="</span>"});var s="";""!=t&&t.length>40&&(s='<i aria-hidden="true" class="fas fa-plus rch_layout_tag_icon rch_layout_expand_icon"></i><i aria-hidden="true" class="fas fa-minus rch_layout_collapsed_icon rch_layout_tag_icon"></i>'),i+='<div class="rch_tag_outer_wrapper">',i+='<div class="rch_tag rch_opening '+p+'">'+s+'&lt;<span class="rch_tag_name"  data_value="'+n+'">'+r+"</span>"+o+"&gt;</div>",i+='<div class="rch_tag_content'+a+'">'+t+"</div>",i+='<div class="rch_tag rch_closing">&lt;/<span class="rch_tag_name" >'+r+"</span>&gt;</div>",i+="</div>"}return i}function rchAddNewImportRule(){var e=jQuery(".rch_element_list").val(),i=jQuery(".rch_element_list").find("option:selected").text(),t=jQuery(".rch_element_rule").val(),p=jQuery(".rch_element_rule").find("option:selected").text(),a=jQuery(".rch_element_value").val();if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectElementText),!1;if(""==t)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportRuleText),!1;if(jQuery(".rch_filter_data_rule").length>0){var r=Math.floor(1e8*Math.random()+1),n='<div class="rch_rule_condition_wrapper"><input type="radio" class="rch_radio rch_rule_clause" checked="checked" name="rch_content_data_rule_condition_'+r+'" id="rch_content_data_rule_condition_and_'+r+'" value="and"/><label for="rch_content_data_rule_condition_and_'+r+'" class="rch_radio_label">'+rchPluginSettings.rchLocalizeText.andText+'</label></div><div class="rch_rule_condition_wrapper rch_rule_condition_or_wrapper"><input type="radio" class="rch_radio rch_rule_clause" name="rch_content_data_rule_condition_'+r+'" id="rch_content_data_rule_condition_or_'+r+'" value="or"/><label for="rch_content_data_rule_condition_or_'+r+'" class="rch_radio_label">'+rchPluginSettings.rchLocalizeText.orText+"</label></div>";jQuery(".rch_filter_rule_table .rch_filter_data_rule").last().find(".rch_filter_data_rule_cond_data").html(n)}else jQuery(".rch_apply_rule_wrapper").show();var o='<tr class="rch_filter_data_rule" ><td class="rch_filter_rule_list rch_filter_data_rule_node" rch_data="'+e+'">'+i+'</td><td class="rch_filter_rule_list rch_filter_data_rule_cond" rch_data="'+t+'">'+p+'</td><td class="rch_filter_rule_list rch_filter_data_rule_val">"'+a+'"</td><td class="rch_filter_rule_list rch_filter_data_rule_cond_data"></td><td class="rch_filter_rule_list rch_filter_data_rule_action"><i class="fas fa-trash rch_trash_general_btn_icon rch_rule_trash_btn " aria-hidden="true"></i></td></tr>';return jQuery(".rch_filter_rule_table").append(o),!0}function rchXpathBuilder(e,i){var t="",p=rchPluginSettings.importData.activeFile,a=rchPluginSettings.importData[p].root;return i&&e.length>1&&(t+=" ("),e.each(function(){var p=jQuery(this).find(".rch_filter_data_rule_node").attr("rch_data"),r=jQuery(this).find(".rch_filter_data_rule_cond").attr("rch_data"),n=jQuery(this).find(".rch_filter_data_rule_val").html();if(n=n.slice(1,-1),jQuery(this).find(".rch_rule_clause:checked").length>0)var o=jQuery(this).find(".rch_rule_clause:checked").val();else o=!1;var s=!1,_="",l="";switch(-1!=p.indexOf("@")&&(s=!0,_=p.split("@")[0],l=p.split("@")[1]),t+=s?_==a?"":_.replace(/->/g,"/"):p.replace(/->/g,"/"),s&&(t+="@"+l),r){case"equals":t+=' = "%s"';break;case"not_equals":t+=' != "%s"';break;case"greater":t+=' > "%s"';break;case"equals_or_greater":t+=' >= "%s"';break;case"less":t+=' < "%s"';break;case"equals_or_less":t+=' <= "%s"';break;case"contains":t+='[contains(.,"%s")]';break;case"not_contains":t+='[not(contains(.,"%s"))]';break;case"is_empty":t+="[not(string())]";break;case"is_not_empty":t+="[string()]"}t=t.replace("%s",n),o&&(t+=" "+o+" "),i&&e.length>1&&(t+=") ")}),t}function rchAddSerialyzeLayout(e,i){if(e.closest(".rch_cf_table").find(".rch_cf_child_data").hide(),jQuery(".rch-cf-activated").removeClass("rch-cf-activated"),e.closest("tr").addClass("rch-cf-activated"),e.closest("tr").find(".rch_cf_child_data .rch_cf_table").length>=1)!0===i&&e.closest("tr .rch_item_cf_value_wrapper").children(".rch_cf_child_data").show();else{var t=rchRand(20);e.closest(".rch_cf_table").find("select").chosen("destroy");var p=jQuery("<div>").append(e.closest(".rch_cf_table").clone()).html(),a=e.closest("tr .rch_item_cf_value_wrapper").children(".rch_cf_child_data");a.html(p),!0===i&&a.show(),a.find("tbody tr:not(.rch-cf-activated)").remove(),a.find("tbody tr").first().attr("rch_row_id",t);var r=a.find(".rch_item_cf_value").first().attr("name");r=rchReplaceAll(r,"[value]","[values]"),a.find(".rch_item_cf_name").first().attr("name",r+"["+t+"][name]").val(""),a.find(".rch_item_cf_value").first().attr("name",r+"["+t+"][value]").val(""),a.find(".rch_item_cf_option").first().attr("name",r+"["+t+"][option]").val("normal").trigger("change"),e.closest(".rch_cf_table").find("select").chosen()}}function rchRand(e){for(var i="",t="abcdefghijklmnopqrstuvwxyz0123456789",p=t.length,a=0;a<e;a++)i+=t.charAt(Math.floor(Math.random()*p));return i}function rchAddNewCF(e){var i=e.children("tbody").children(".rch_data_row").last(),t=i.attr("rch_row_id"),p=rchRand(20);i.find(".rch_content_data_select").chosen("destroy");var a=jQuery("<div>").append(i.clone()).html();a=rchReplaceAll(a,t,p),i.find(".rch_content_data_select").chosen(),e.children("tbody").first().append(a);var r=e.children("tbody").children(".rch_data_row").last();r.children(".rch_item_cf_value_wrapper").children(".rch_cf_child_data").html(""),r.children(".rch_item_cf_option_wrapper").find(".rch_content_data_select").val("normal").trigger("change").chosen(),r.children(".rch_item_cf_name_wrapper").find(".rch_item_cf_name").val(""),r.children(".rch_item_cf_value_wrapper").children(".rch_cf_normal_data").find(".rch_item_cf_value").val("")}function rchEscapeRegExp(e){if(void 0!==e&&null!==typeof e)return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function rchReplaceAll(e,i,t){return void 0!==e&&null!==typeof e?e.replace(new RegExp(rchEscapeRegExp(i),"g"),t):e}function rchAddNewSerializeCF(e){var i=e.find(".rch_cf_serialized_option_container .rch_cf_serialized_option_wrapper").last().find(".rch_item_cf_serialize_key").attr("name"),t=e.find(".rch_cf_serialized_option_container .rch_cf_serialized_option_wrapper").last().find(".rch_item_cf_serialize_value").attr("name"),p=parseInt(i.substring(i.lastIndexOf("[")+1,i.lastIndexOf("]"))),a="]["+(p+1)+"]",r="]["+p+"]";i=i.replace(r,a),t=t.replace(r,a);var n=e.find(".rch_cf_serialized_option_container .rch_cf_serialized_option_wrapper").first().clone();e.find(".rch_cf_serialized_option_container").append(n),e.find(".rch_cf_serialized_option_container .rch_cf_serialized_option_wrapper").last().find(".rch_item_cf_serialize_key").val("").attr("name",i),e.find(".rch_cf_serialized_option_container .rch_cf_serialized_option_wrapper").last().find(".rch_item_cf_serialize_value").val("").attr("name",t)}function rchIsValidTime(){var e=rchPluginSettings.rchPluginData;if(""!==e){var i=jQuery.parseJSON(e);

	if(1==2)return!0}return!1}function rchScrollTop(){jQuery("html, body").animate({scrollTop:0},300)}function rchInitImport(e){rchSetProcessLoader({rchSaveSettings:rchPluginSettings.rchLocalizeText.rchSaveSettingsText});var i=rchPluginSettings.importData.activeFile,t=1;jQuery(".rch_import_type.rch_active").hasClass("rch_update_item")&&(t=0);var p=rchPluginSettings.rchImportId,a=rchPluginSettings.importData[i].xpath,r=rchPluginSettings.importData[i].root,n=0;"bg"==e&&(n="1");var o=jQuery(".rch_import_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_import_update_data&rch_import_id="+p+"&bg="+n+"&xpath="+a+"&root="+r+"&is_new_items="+t+"&"+o,dataType:"json",async:!0,success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;rchUpdateProcessLoader("rchSaveSettings"),"import"==e?(rchResetImportProcess(),rchPluginSettings.importData.processStatus="processing",jQuery(".rch_import_step:visible").hide(),jQuery(".rch_import_step7").show(),rchScrollTop(),rchImportData()):"bg"==e&&rchSetSuccessMsg(rchPluginSettings.rchLocalizeText.rchBgProcessingText)},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchResetImportProcess(){var e=rchPluginSettings.importData.activeFile;jQuery(".rch_import_process_text_header").text(rchPluginSettings.rchLocalizeText.rchImportProcessingText),jQuery(".rch_import_process_text_notice").text(rchPluginSettings.rchLocalizeText.rchImportProcessingNoticeText),jQuery(".rch_import_filename").html(rchPluginSettings.importData[e].fileName),jQuery(".rch_import_filesize").html(rchPluginSettings.importData[e].fileSize),jQuery(".rch_import_process_per").css("width","auto").text("0%"),jQuery(".rch_import_created").text("0"),jQuery(".rch_import_updated").text("0"),jQuery(".rch_import_skipped").text("0"),jQuery(".rch_import_time_elapsed").text("00:00:00"),jQuery(".rch_import_total").text(rchPluginSettings.importData[e].count),void 0!==rchPluginSettings.importData.importInterval&&clearInterval(rchPluginSettings.importData.importInterval),rchPluginSettings.importData.importIntervalSec=0,rchPluginSettings.importData.importInterval=setInterval(function(){jQuery(".rch_import_time_elapsed").html(rchElapsedTimeString(rchPluginSettings.importData.importIntervalSec++))},1e3)}function rchElapsedTimeString(e){var i=Math.floor(e/3600);e%=3600;var t=Math.floor(e/60);e%=60;var p=Math.floor(e);return(i=rchPrettyTimeString(i))+":"+(t=rchPrettyTimeString(t))+":"+(p=rchPrettyTimeString(p))}function rchPrettyTimeString(e){return(e<10?"0":"")+e}function rchObjectifyForm(e,i){var t={};return jQuery.each(e,function(e,i){t[i.name]=i.value}),jQuery.each(i,function(e,i){t[e]=i}),t}function rchImportData(){"processing"==rchPluginSettings.importData.processStatus?(rchPluginSettings.importData.processing=!0,jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_data&rch_import_id="+rchPluginSettings.rchImportId,dataType:"json",async:!0,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;if(void 0!==e.imported&&null!==e.imported){jQuery(".rch_import_created").html(parseInt(e.created)),jQuery(".rch_import_updated").html(parseInt(e.updated)),jQuery(".rch_import_skipped").html(parseInt(e.skipped));var i=rchPluginSettings.importData.activeFile,t=parseInt(100*parseInt(e.imported)/parseInt(rchPluginSettings.importData[i].count));t>100&&(t=100),jQuery(".rch_import_process_per").css("width",t+"%").html(t+"%"),jQuery(".rch_log_container").append(e.import_log),rchPluginSettings.importData[i].count>parseInt(e.imported)?rchImportData():rchCompleteImport()}},error:function(e,i){rchPluginSettings.importData.processing=!1,rchHandleAjaxError(e,i)}})):"pause"==rchPluginSettings.importData.processStatus?(void 0!==rchPluginSettings.importData.importInterval&&clearInterval(rchPluginSettings.importData.importInterval),rchUpdateProcessLoader("rchProcessingNotice"),jQuery(".rch_import_action_resume_btn").show(),jQuery(".rch_import_action_pause_btn").hide(),rchPluginSettings.importData.processing=!1):"stop"==rchPluginSettings.importData.processStatus?(void 0!==rchPluginSettings.importData.importInterval&&clearInterval(rchPluginSettings.importData.importInterval),jQuery(".rch_import_action_container").hide(),rchUpdateProcessLoader("rchProcessingNotice"),rchPluginSettings.importData.processing=!1):"bg"==rchPluginSettings.importData.processStatus&&(void 0!==rchPluginSettings.importData.importInterval&&clearInterval(rchPluginSettings.importData.importInterval),jQuery(".rch_import_action_container").hide(),rchUpdateProcessLoader("rchProcessingNotice"),rchPluginSettings.importData.processing=!1,rchChangeStatus("bg"))}function rchCompleteImport(){jQuery(".rch_import_process_text_header").text(rchPluginSettings.rchLocalizeText.rchImportCompleteText),jQuery(".rch_import_process_text_notice").text(rchPluginSettings.rchLocalizeText.rchImportCompleteNoticeText),void 0!==rchPluginSettings.importData.importInterval&&clearInterval(rchPluginSettings.importData.importInterval),jQuery(".rch_import_action_container").hide(),jQuery(".rch_import_processing_wrapper").hide(),jQuery(".rch_import_process_complete_wrapper").show()}function rchRefreshTemplateList(e){jQuery(".rch_template_list").chosen("destroy");var i='<option value="">'+rchPluginSettings.rchLocalizeText.selectTemplateText+"</option>";jQuery.isEmptyObject(e)||jQuery.each(e,function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"}),jQuery(".rch_template_list").html(i).chosen()}function rchImportGetTemplates(){var e=jQuery(".rch_import_type_select").val();void 0===rchPluginSettings.importData[e]&&(rchPluginSettings.importData[e]=[]),void 0!==rchPluginSettings.importData[e].templates?(rchRefreshTemplateList(rchPluginSettings.importData[e].templates),rchUpdateProcessLoader("rchGetTemplates")):jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_get_templates&rch_import_type="+e,dataType:"json",async:!0,success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;rchUpdateProcessLoader("rchGetTemplates"),void 0!==i.templates&&(rchPluginSettings.importData[e].templates=i.templates,rchRefreshTemplateList(i.templates))},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchSaveTemplate(e){var i=jQuery(".rch_template_name").val();if(""==i&&0===e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.enterTemplateNameText),!1;rchSetProcessLoader({rchSaveTemplatesText:rchPluginSettings.rchLocalizeText.rchSaveTemplatesText});var t=jQuery(".rch_import_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_import_save_templates&template_id="+e+"&"+t,dataType:"json",async:!0,success:function(t){if("error"==t.status)return rchSetErrorMsg(t.message),rchUpdateProcessLoader("rchSaveTemplatesText"),!1;0===e?jQuery(".rch_template_list").append(new Option(i,t.template_id)).val("").trigger("chosen:updated"):void 0!==rchPluginSettings.importData.templateData&&void 0!==rchPluginSettings.importData.templateData[e]&&delete rchPluginSettings.importData.templateData[e],rchSetSuccessMsg(t.message),rchUpdateProcessLoader("rchSaveTemplatesText")},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchImportGetTemplateData(e){void 0===rchPluginSettings.importData.templateData&&(rchPluginSettings.importData.templateData=[]),void 0!==rchPluginSettings.importData.templateData[e]?(rchUpdateProcessLoader("rchGetTemplatesText"),rchSetTemplate(rchPluginSettings.importData.templateData[e])):jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_get_template_data&rch_template_id="+e,dataType:"json",async:!0,success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;rchUpdateProcessLoader("rchGetTemplatesText"),void 0!==i.template_data&&(rchPluginSettings.importData.templateData[e]=i.template_data,rchSetTemplate(i.template_data)),rchUpdateProcessLoader("rchChangeTemplates")},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchSetCFRec(e,i){if(!jQuery.isEmptyObject(e)){var t=0;jQuery.each(e,function(e,p){t>0&&rchAddNewCF(i);var a="";void 0!==p.name&&(a=p.name);var r=i.children("tbody").children(".rch_data_row").last();r.children(".rch_item_cf_name_wrapper").find(".rch_item_cf_name").val(a);var n="";void 0!==p.value&&(n=p.value),r.children(".rch_item_cf_value_wrapper").children(".rch_cf_normal_data").find(".rch_item_cf_value").val(n);var o="";if(void 0!==p.option&&(o=p.option),r.children(".rch_item_cf_option_wrapper").find(".rch_item_cf_option").val(o).trigger("chosen:updated").trigger("change"),"serialized"===o&&void 0!==p.values){rchAddSerialyzeLayout(r.children(".rch_item_cf_value_wrapper").children(".rch_cf_serialized_data_btn"),!1);var s=r.children(".rch_item_cf_value_wrapper").children(".rch_cf_child_data").children(".rch_cf_table");rchSetCFRec(p.values,s)}t++})}}function rchSetCF(e){if(jQuery(".rch_cf_option_outer_wrapper .rch_cf_option_wrapper:not(:first)").remove(),!jQuery.isEmptyObject(e))if(void 0!==e.rch_item_cf&&null!==typeof e.rch_item_cf){var i=jQuery(".rch_cf_table");rchSetCFRec(e.rch_item_cf,i)}else if(void 0!==e.rch_item_cf_name){var t=[];void 0!==e.rch_item_cf_value&&(t=e.rch_item_cf_value);var p=[];void 0!==e.rch_item_cf_option&&(p=e.rch_item_cf_option);var a=[];void 0!==e.rch_item_cf_serialize_key&&(a=e.rch_item_cf_serialize_key);var r=[];void 0!==e.rch_item_cf_serialize_value&&(r=e.rch_item_cf_serialize_value);var n={};if(jQuery.each(e.rch_item_cf_name,function(e,i){var o=rchRand(20);n[o]={},n[o].name=i;var s="";void 0!==t[e]&&(s=t[e]),n[o].value=s;var _="normal";if("undefined"!=p[e]&&"serialized"===p[e]&&(_=p[e]),n[o].option=_,"serialized"===_&&void 0!==a[e]){var l=[];n[o].values={},void 0!==r[e]&&(l=r[e]),jQuery.each(a[e],function(e,i){var t="";"undefined"!=l[e]&&(t=l[e]);var p=rchRand(20);n[o].values[p]={},n[o].values[p].name=i,n[o].values[p].value=t,n[o].values[p].option="normal"})}}),!jQuery.isEmptyObject(n)){i=jQuery(".rch_cf_table");rchSetCFRec(n,i)}}}function rchChangeStatus(e){rchSetProcessLoader({rchSetBGProcessText:rchPluginSettings.rchLocalizeText.rchSetBGProcessText});var i=rchPluginSettings.rchImportId;jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_update_status&rch_import_id="+i+"&status="+e,dataType:"json",async:!0,success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;rchUpdateProcessLoader("rchSetBGProcessText"),"bg"==e&&rchSetSuccessMsg(rchPluginSettings.rchLocalizeText.rchBgProcessingText)},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchIsData(){var e=rchPluginSettings.rchPluginData;if(""!==e){var i=jQuery.parseJSON(e);if(1==1)return!0}return!1}function rchSetTaxonomy(e){if(rchResetTaxonomy(),!jQuery.isEmptyObject(e)&&void 0!==e.rch_item_set_taxonomy){var i=[];void 0!==e.rch_item_taxonomy&&(i=e.rch_item_taxonomy);var t=[];void 0!==e.rch_item_taxonomy_delim&&(t=e.rch_item_taxonomy_delim);var p=[];void 0!==e.rch_item_taxonomy_hierarchical_delim&&(p=e.rch_item_taxonomy_hierarchical_delim);var a=[];void 0!==e.rch_item_taxonomy_child_only&&(a=e.rch_item_taxonomy_child_only),jQuery.each(e.rch_item_set_taxonomy,function(e,r){if(1!=r)return!0;if(jQuery(".rch_item_set_taxonomy_"+e).prop("checked",!0),void 0!==i[e]){var n=i[e];jQuery(".rch_item_taxonomy_"+e).val(n)}void 0!==t[e]&&jQuery(".rch_item_taxonomy_delim_"+e).val(t[e]),void 0!==p[e]&&jQuery(".rch_item_taxonomy_hierarchical_delim_"+e).val(p[e]),void 0!==a[e]&&1==a[e]?jQuery(".rch_item_taxonomy_child_only_"+e).prop("checked",!0):jQuery(".rch_item_taxonomy_child_only_"+e).prop("checked",!1)})}}function rchResetTaxonomy(){jQuery(".rch_item_set_taxonomy").prop("checked",!1),jQuery(".rch_item_taxonomy").val(""),jQuery(".rch_item_taxonomy_delim").val(","),jQuery(".rch_item_taxonomy_hierarchical_delim").val(">"),jQuery(".rch_taxonomy_hierarchical_child_only").prop("checked",!1)}jQuery(document).ready(function(e){if(null==rchPluginSettings&&(rchPluginSettings=[]),void 0===rchPluginSettings.rchImportId&&(rchPluginSettings.rchImportId=0),void 0===rchPluginSettings.importData&&(rchPluginSettings.importData=[]),jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".rch_content_data_select").length&&jQuery(".rch_content_data_select").chosen(),jQuery("#rch_upload_container").length&&rch_set_local_file_uploader(),jQuery(".rch_import_ref_id").length){var i=jQuery(".rch_import_ref_id").val();if(""===i){var t=jQuery(".rch_error_msg").attr("msg");""!==t&&rchSetErrorMsg(t)}else{rchProcessingReimport(jQuery(".rch_import_id").val(),jQuery(".rch_import_nonce").val(),i)}}rchSetToolTip()}),jQuery(document).on("rchValidUploadFile",function(e){""!==jQuery(".rch_import_ref_id").val()&&jQuery(".rch_import_step5_btn").trigger("click")}),jQuery(document).on("click",".rch_upload_menu",function(){if(!jQuery(this).hasClass("rch_active")){jQuery(".rch_upload_menu.rch_active").removeClass("rch_active"),jQuery(this).addClass("rch_active"),jQuery(".rch_upload_section_wrapper:visible").hide();var e=jQuery(this).attr("show_container");jQuery(".rch_file_upload_method").val(e),jQuery("."+e).show()}}),jQuery(document).on("show.bs.modal",".modal",function(e){var i=1040+10*jQuery(".modal:visible").length;jQuery(this).css("z-index",i),setTimeout(function(){jQuery(".modal-backdrop").not(".modal-stack").css("z-index",i-1).addClass("modal-stack")},0)}),jQuery(document).on("change",".rch_handle_items",function(){"new"==jQuery(this).val()?jQuery(".rch_import_existing_item_section").hide():jQuery(".rch_import_existing_item_section").show()}),jQuery(document).on("change",".rch_import_type_select",function(){if(!rchValidateImportExt())return!1;var e=jQuery(this).val();jQuery(".rch_content_data").attr("class","rch_content_data rch_"+e),rchSetProcessLoader({rchGetTemplates:rchPluginSettings.rchLocalizeText.rchGetTemplatesText,rchGetFields:rchPluginSettings.rchLocalizeText.rchGetFieldsText}),rchImportGetTemplates(),"taxonomies"==e?jQuery(".rch_taxonomies_types_wrapper").slideDown():jQuery(".rch_taxonomies_types_wrapper").slideUp(),rchGetImportFields(e)}),jQuery(document).on("change",".rch_upload_file_list",function(){rchPluginSettings.importData.activeFile=jQuery(this).val(),rchValidateUploadedFile(!1,",")}),jQuery(document).on("click",".rch_layout_tag_wrapper",function(){if(!jQuery(this).hasClass("rch_active")){rchSetProcessLoader({rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText}),jQuery(".rch_element_nav_element").val(1),jQuery(".rch_layout_tag_wrapper.rch_active").removeClass("rch_active"),jQuery(this).addClass("rch_active");var e=jQuery(this).find(".rch_layout_tag_name").html(),i="/"+e;jQuery(".rch_xpath").val(i),rchGetFilteredRecords(0,1,i,e,!0)}}),jQuery(document).on("click",".rch_data_element_nav_next",function(){parseInt(jQuery(".rch_element_nav_element").val())<parseInt(jQuery(".rch_data_element_action_nav_total").html())&&(rchSetProcessLoader({rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText}),rchGotoRecord(parseInt(jQuery(".rch_element_nav_element").val())+1))}),jQuery(document).on("click",".rch_data_element_nav_prev",function(){if(1==parseInt(jQuery(".rch_element_nav_element").val()))return!1;rchSetProcessLoader({rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText}),rchGotoRecord(parseInt(jQuery(".rch_element_nav_element").val())-1)}),jQuery(document).on("blur",".rch_element_nav_element",function(){rchSetProcessLoader({rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText});var e=rchPluginSettings.importData.activeFile,i=rchPluginSettings.importData[e].count,t=parseInt(jQuery(this).val());(i<t||t<1)&&(t=1),rchGotoRecord(t)}),jQuery(document).on("click",".rch_tag.rch_opening",function(){return jQuery(this).find(".rch_layout_tag_icon").length&&(jQuery(this).hasClass("rch_collapsed")?jQuery(this).removeClass("rch_collapsed"):jQuery(this).addClass("rch_collapsed")),!1}),jQuery(document).on("click",".rch_save_add_rule_btn",function(){rchShowLoader(),rchAddNewImportRule()&&(jQuery(".rch_element_list").val("").trigger("chosen:updated"),jQuery(".rch_element_rule").val("").trigger("chosen:updated"),jQuery(".rch_element_value").val("")),rchHideLoader()}),jQuery(document).on("change",".rch_import_file_processing",function(){"chunk"==jQuery(this).val()?jQuery(".rch_iteration_process_wrapper").slideDown():jQuery(".rch_iteration_process_wrapper").slideUp()}),jQuery(document).on("change",".rch_item_cf_option",function(){"serialized"==jQuery(this).val()?(jQuery(this).closest("tr").find(".rch_cf_serialized_data_btn").show(),jQuery(this).closest("tr").find(".rch_cf_normal_data").hide()):(jQuery(this).closest("tr").find(".rch_cf_serialized_data_btn").hide(),jQuery(this).closest("tr").find(".rch_cf_normal_data").show())}),jQuery(document).on("click",".rch_cf_serialized_data_btn",function(){rchAddSerialyzeLayout(jQuery(this),!0)}),jQuery(document).on("click",".rch_cf_serialized_close_btn",function(){jQuery(".rch_cf_serialized_data").hide()}),jQuery(document).on("click",".rch_cf_add_btn",function(){rchAddNewCF(jQuery(this).closest("table"))}),jQuery(document).on("click",".rch_cf_close_btn",function(){jQuery(this).closest(".rch_cf_child_data").hide()}),jQuery(document).on("click",".rch_cf_serialized_add_btn",function(){rchAddNewSerializeCF(jQuery(this).closest(".rch_cf_serialized_wrapper"))}),jQuery(document).on("click",".rch_remove_cf_btn",function(){jQuery(this).closest("tbody").children("tr").length<=1&&rchAddNewCF(jQuery(this).closest("table"));jQuery(this).closest("tr").remove()}),jQuery(document).on("click",".rch_trash_cf_serialized_btn_wrapper",function(){var e=jQuery(this).closest(".rch_cf_serialized_wrapper");e.find(".rch_cf_serialized_option_wrapper").length<=1&&rchAddNewSerializeCF(e),jQuery(this).closest(".rch_cf_serialized_option_wrapper").remove()}),jQuery(document).on("click",".rch_rule_trash_btn",function(){jQuery(this).closest("tr").remove(),jQuery(".rch_filter_data_rule").length>=1?jQuery(".rch_filter_data_rule").last().find(".rch_filter_data_rule_cond_data").html(""):jQuery(".rch_apply_rule_wrapper").hide()}),jQuery(document).on("click",".rch_apply_rule_btn",function(){rchSetProcessLoader({rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText});var e=rchPluginSettings.importData.activeFile,i=jQuery(".rch_xpath").val(),t="[";t+=rchXpathBuilder(jQuery(".rch_filter_data_rule"),0),t+="]",rchPluginSettings.importData[e].xpath=i.split("[")[0]+t,jQuery(".rch_xpath").val(rchPluginSettings.importData[e].xpath),rchGetFilteredRecords(0,1,rchPluginSettings.importData[e].xpath,rchPluginSettings.importData[e].root,!0)}),jQuery(document).on("blur",".rch_xpath",function(){var e=jQuery(this).val(),i=rchPluginSettings.importData.activeFile;rchPluginSettings.importData[i].xpath!=e&&(rchSetProcessLoader({rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText}),rchPluginSettings.importData[i].xpath=e,rchGetFilteredRecords(0,1,rchPluginSettings.importData[i].xpath,rchPluginSettings.importData[i].root,!0))}),jQuery.fn.rchInsertAtCaret=function(){if(!this.length)return this;var e,i=0,t=jQuery(".rch_drag_element");t.length||(t=jQuery('<input type="text" class="rch_drag_element" readonly="readonly" />')),t.appendTo(document.body).mousedown(function(e){if(!i){var p=e.pageX-t.offset().left,a=e.pageY-t.offset().top;p<4||a<4||t.width()-p<0||t.height()-a<0||(t.css("opacity",1),t.select(),i=!0,setTimeout(function(){i=!1},400))}}).mouseup(function(){t.css("opacity",0).css("width",e),t.blur()}),jQuery(document).mousemove(function(){0!=parseInt(t.css("opacity"))&&(setTimeout(function(){t.css("opacity",0)},50),setTimeout(function(){t.css("width",e)},500))}),this.each(function(){var i=jQuery(this),p="{"+i.attr("data_value")+"}";i.mouseover(function(a){t.val(p).offset({left:i.offset().left-2,top:i.offset().top-2}).width(e=i.width()+8).height(i.height())})}).eq(0).mouseover()},jQuery(document).on("click",".rch_import_step_btn",function(){if(jQuery(this).hasClass("rch_import_step3_btn")&&!1===rchIsValidTime())return!1;jQuery(".rch_import_step").hide(),jQuery("."+jQuery(this).attr("rch_show")).show(),rchScrollTop()}),jQuery(document).on("click",".rch_import_step3_btn",function(){if(!rchValidateProcess())return!1;var e=rchPluginSettings.importData.activeFile;if(0==rchPluginSettings.importData[e].count)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchNoRecordsFoundText),!1;jQuery(".rch_import_step").hide(),jQuery("."+jQuery(this).attr("rch_show")).show(),rchScrollTop()}),jQuery(document).on("click",".rch_import_step1_btn",function(){var e=!1;if(jQuery(".rch_upload_section_wrapper:visible .rch_upload_file_list:checked").length){var i=jQuery(".rch_upload_section_wrapper:visible .rch_upload_file_list:checked").val();rchPluginSettings.importData.activeFile=i,void 0===rchPluginSettings.importData[i]?e=!0:void 0===rchPluginSettings.importData[i].fileName&&(e=!0)}else e=!0;if(e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchChooseValidFileText),!1;jQuery(".rch_import_step").hide(),jQuery("."+jQuery(this).attr("rch_show")).show(),rchScrollTop()}),jQuery(document).on("scroll",function(){if(jQuery(".rch_field_mapping_data_wrapper").is(":visible")){var e=jQuery(".rch_field_mapping_data_container").offset();if(jQuery(document).scrollTop()>parseInt(e.top-65)){var i=jQuery(".rch_field_mapping_data_container").css("width");jQuery(".rch_field_mapping_data_wrapper").css({width:i,top:"60px",position:"fixed"}),jQuery(".rch_field_mapping_data_wrapper").find(".rch_data_fields_container").css({"max-height":jQuery(window).height()-160+"px"})}else{i=jQuery(".rch_field_mapping_data_container").css("width");jQuery(".rch_field_mapping_data_wrapper").css({width:"",top:"",position:""}),jQuery(".rch_field_mapping_data_wrapper").find(".rch_data_fields_container").css({"max-height":""})}}}),jQuery(document).
	on("click",".rch_import_action_pause_btn",function(){(jQuery(".rch_import_process_text_header").text(rchPluginSettings.rchLocalizeText.rchImportPausedText),jQuery(".rch_import_process_text_notice").text(rchPluginSettings.rchLocalizeText.rchImportPartiallyText),rchPluginSettings.importData.processStatus="pause",1==rchPluginSettings.importData.processing)?rchSetProcessLoader({rchProcessingNotice:rchPluginSettings.rchLocalizeText.rchImportProcessingNoticeText}):(jQuery(".rch_import_action_resume_btn").show(),jQuery(".rch_import_action_pause_btn").hide())}),jQuery(document).on("click",".rch_import_action_stop_btn",function(){(rchPluginSettings.importData.processStatus="stop",jQuery(".rch_import_process_text_header").text(rchPluginSettings.rchLocalizeText.rchImportStoppedText),jQuery(".rch_import_process_text_notice").text(rchPluginSettings.rchLocalizeText.rchImportPartiallyText),1==rchPluginSettings.importData.processing)?rchSetProcessLoader({rchProcessingNotice:rchPluginSettings.rchLocalizeText.rchImportProcessingNoticeText}):jQuery(".rch_import_action_container").hide()}),jQuery(document).on("click",".rch_import_action_resume_btn",function(){rchPluginSettings.importData.processStatus="processing",jQuery(".rch_import_process_text_header").text(rchPluginSettings.rchLocalizeText.rchImportProcessingText),jQuery(".rch_import_process_text_notice").text(rchPluginSettings.rchLocalizeText.rchImportProcessingNoticeText),rchPluginSettings.importData.importInterval=setInterval(function(){jQuery(".rch_import_time_elapsed").html(rchElapsedTimeString(rchPluginSettings.importData.importIntervalSec++))},1e3),jQuery(this).hide(),jQuery(".rch_import_action_pause_btn").show(),rchImportData()}),jQuery(document).on("click",".rch_field_mapping_container_title",function(){jQuery(this).hasClass("rch_active")?jQuery(this).removeClass("rch_active"):jQuery(this).addClass("rch_active"),jQuery(this).parent().find(".rch_field_mapping_container_data").slideToggle()}),jQuery(document).on("click",".rch_save_template_btn",function(){rchSaveTemplate(0)}),jQuery(document).on("click",".rch_update_template_btn",function(){var e=jQuery(".rch_template_list").val();if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyTemplate),!1;rchSaveTemplate(e)}),jQuery(document).on("click",".rch_update_item_all_action",function(){jQuery(".rch_item_update_field").length==jQuery(".rch_item_update_field:checked").length?jQuery(".rch_item_update_field").prop("checked",!1):jQuery(".rch_item_update_field").prop("checked",!0)}),jQuery(document).on("change",".rch_template_list",function(){if(""!=jQuery(this).val()){var e={rchChangeTemplates:rchPluginSettings.rchLocalizeText.rchChangeTemplatesText,rchGetTemplatesText:rchPluginSettings.rchLocalizeText.rchGetTemplatesText};jQuery(".rch_update_template_btn_wrapper").show(),rchSetProcessLoader(e),rchImportGetTemplateData(jQuery(this).val())}else jQuery(".rch_update_template_btn_wrapper").hide()}),jQuery(document).on("click",".rch_csv_delimiter_btn",function(){var e=jQuery(".rch_csv_delimiter").val();if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.enterCsvDelimiterText),!1;rchSetProcessLoader({rchValidateUpload:rchPluginSettings.rchLocalizeText.rchParingUploadFileText,rchGetFields:rchPluginSettings.rchLocalizeText.rchGetFieldsText,rchGetRecords:rchPluginSettings.rchLocalizeText.rchGetRecordsText}),rchValidateUploadedFile(!0,e)}),jQuery(document).on("change",".rch_item_image_option",function(){"media_library"==jQuery(this).val()?jQuery(".rch_image_media_option_data").slideUp():jQuery(".rch_image_media_option_data").slideDown()}),jQuery(document).on("click",".rch_import_step5_btn",function(){rchShowLoader();var e=rchPluginSettings.importData.activeFile;jQuery(".rch_import_total_count").html(rchPluginSettings.importData[e].count),jQuery(".rch_import_filename").html(rchPluginSettings.importData[e].fileName),jQuery(".rch_import_filesize").html(rchPluginSettings.importData[e].fileSize),jQuery(".rch_import_per_iteration").html(jQuery(".rch_records_per_request").val()),jQuery(".rch_import_update_criteria").html(jQuery(".rch_existing_item_search_logic:checked").val()),jQuery(".rch_import_type.rch_active").hasClass("rch_update_item")?(jQuery(".rch_import_update_item_summary_text").show(),jQuery(".rch_import_new_item_summary_text").hide(),jQuery(".rch_skip_new_items").is(":checked")?jQuery(".rch_import_update_item_created_summary_text").hide():jQuery(".rch_import_update_item_skip_summary_text").hide()):(jQuery(".rch_import_update_item_summary_text").hide(),jQuery(".rch_skip_existing_items").is(":checked")&&jQuery(".rch_import_new_item_summary_text").show()),"all"==jQuery(".rch_import_file_processing:checked").val()?(jQuery(".rch_import_iteration_text").hide(),jQuery(".rch_import_hidh_speed_text").show()):(jQuery(".rch_import_iteration_text").show(),jQuery(".rch_import_hidh_speed_text").hide(),jQuery(".rch_import_split_file").is(":checked")||jQuery(".rch_import_iteration_chunks_text").hide()),rchHideLoader()}),jQuery(document).on("click",".rch_existing_file_btn",function(){var e=jQuery(".rch_upload_existing_file").val();if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchChooseValidFileText),!1;rchSetProcessLoader({rchSetExistingFileText:rchPluginSettings.rchLocalizeText.rchSetExistingFileText}),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_import_set_existing_file&rch_import_id="+rchPluginSettings.rchImportId+"&file_name="+e,dataType:"json",async:!0,success:function(i){if(rchUpdateProcessLoader("rchSetExistingFileText"),"error"==i.status)return rchSetErrorMsg(i.message),!1;jQuery(".rch_final_existing_file").val(e),rchSetFileData(i)},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("click",".rch_pre_import_btn .rch_import_bg_process_btn",function(){rchInitImport("bg")}),jQuery(document).on("click",".rch_import_processing_btn .rch_import_bg_process_btn",function(){(rchPluginSettings.importData.processStatus="bg",jQuery(".rch_import_process_text_header").text(rchPluginSettings.rchLocalizeText.rchImportBGText),jQuery(".rch_import_process_text_notice").text(rchPluginSettings.rchLocalizeText.rchImportBGNoticeText),1==rchPluginSettings.importData.processing)?rchSetProcessLoader({rchProcessingNotice:rchPluginSettings.rchLocalizeText.rchImportProcessingNoticeText}):(jQuery(".rch_import_action_container").hide(),rchChangeStatus("bg"))}),jQuery(document).on("click",".rch_save_scheduled_btn",function(){rchSetProcessLoader({rchSetScheduleExport:rchPluginSettings.rchLocalizeText.rchSetScheduleExportText});var e=rchPluginSettings.importData.activeFile,i=1;jQuery(".rch_import_type.rch_active").hasClass("rch_update_item")&&(i=0);var t=rchPluginSettings.rchImportId,p=rchPluginSettings.importData[e].xpath,a=rchPluginSettings.importData[e].root,r=jQuery(".rch_import_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_save_import_scheduled&rch_import_id="+t+"&bg=0&xpath="+p+"&root="+a+"&is_new_items="+i+"&"+r,dataType:"json",async:!0,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;rchUpdateProcessLoader("rchSetScheduleExport"),rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("click",".rch_url_upload_btn",function(){var e=encodeURIComponent(jQuery(".rch_file_upload_url").val());if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchInvalidURLText),!1;rchSetProcessLoader({rchUploadFromURLText:rchPluginSettings.rchLocalizeText.rchUploadFromURLText}),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_import_upload_file_from_url&rch_import_id="+rchPluginSettings.rchImportId+"&file_url="+e,dataType:"json",async:!0,success:function(i){if(rchUpdateProcessLoader("rchUploadFromURLText"),"error"==i.status)return rchSetErrorMsg(i.message),!1;jQuery(".rch_upload_final_file_url").val(e),rchSetFileData(i)},error:function(e,i){rchUpdateProcessLoader("rchUploadFromURLText"),rchHandleAjaxError(e,i)}})}),jQuery(document).on("change",".rch_item_dropdown_as_specified",function(){"as_specified"==jQuery(this).val()?jQuery(".rch_item_as_specified_wrapper").show():jQuery(".rch_item_as_specified_wrapper").hide()}),jQuery(document).on("click",".rch_ftp_upload_btn",function(){var e=jQuery(".rch_ftp_hostname").val(),i=jQuery(".rch_ftp_host_port").val(),t=jQuery(".rch_ftp_host_username").val(),p=jQuery(".rch_ftp_host_password").val(),a=jQuery(".rch_ftp_host_path").val(),r="";if(""===e?r=rchPluginSettings.rchLocalizeText.rchInvalidHostNameText:""==t?r=rchPluginSettings.rchLocalizeText.rchInvalidHostUsernameText:""==p?r=rchPluginSettings.rchLocalizeText.rchInvalidHostPasswordText:""==a&&(r=rchPluginSettings.rchLocalizeText.rchInvalidHostPathText),""!==r)return rchSetErrorMsg(r),!1;var n={host:e,post:i,username:t,password:p,path:a};jQuery(".rch_ftp_details").val(JSON.stringify(n)),rchSetProcessLoader({rchUploadFromFTPText:rchPluginSettings.rchLocalizeText.rchUploadFromFTPText}),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_import_upload_file_from_ftp&rch_import_id="+rchPluginSettings.rchImportId+"&hostname="+e+"&host_port="+i+"&username="+t+"&password="+p+"&host_path="+a,dataType:"json",async:!0,success:function(e){if(rchUpdateProcessLoader("rchUploadFromFTPText"),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetFileData(e)},error:function(e,i){rchHandleAjaxError(e,i)}})});