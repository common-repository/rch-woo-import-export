"use strict";function rchSetToolTip(){jQuery.isFunction(jQuery.fn.tipso)&&jQuery(".rch_data_tipso").length&&jQuery(".rch_data_tipso").tipso({useTitle:!1,background:"rgba(0,0,0,0.8)",color:"#ffffff",size:"small",tooltipHover:!0})}function rchHandleAjaxError(e,i){return rchSetErrorMsg(0===e.status?rchPluginSettings.rchLocalizeText.rch_ajax_not_connect_error:400==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_400_error:404==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_404_error:500==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_internal_server_error:"parsererror"===i?rchPluginSettings.rchLocalizeText.rch_ajax_jason_parse_error:"timeout"===i?rchPluginSettings.rchLocalizeText.rch_ajax_time_out_error:"abort"===i?rchPluginSettings.rchLocalizeText.rch_ajax_request_aborted_error:rchPluginSettings.rchLocalizeText.rch_ajax_uncaught_error+e.responseText),!1}function rchSetErrorMsg(e){rchHideLoader(),jQuery(".rch_error_content").html(e),jQuery(".rch_error_model").modal({backdrop:!0,show:!0})}function rchSetSuccessMsg(e){jQuery.notify({message:'<i class="far fa-check-circle"></i> '+e},{type:"success",placement:{align:"right",from:"bottom"},animate:{enter:"animated fadeInUp",exit:"animated fadeOutDown"}})}function rchShowLoader(){jQuery(".rch_loader").removeClass("rch_hidden")}function rchHideLoader(){jQuery(".rch_loader").addClass("rch_hidden")}function rchGetTemplates(){jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_get_tempaltes",dataType:"json",async:!1,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;jQuery(".rch_template_list").html(e.html).trigger("chosen:updated"),rchHideLoader()},error:function(e,i){rchHandleAjaxError(e,i)}})}function rch_update_process_status(e,i){rchShowLoader(),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_update_process_status&rch_process_id="+i+"&process_status="+e,dataType:"json",success:function(e){if(rchHideLoader(),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchDeleteTemplates(e,i){jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_delete_tempaltes&templates="+e+"&process_type="+i,dataType:"json",async:!1,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message),rchHideLoader()},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchChangeLicenseStatus(e,i){jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_change_license_status&status="+e+"&license="+i,dataType:"json",async:!1,success:function(i){if(!1===i.success)return rchSetErrorMsg(i.data),!1;"activate"==e?(jQuery(".rch_license_activation_wrapper").hide(),jQuery(".rch_license_deactivation_wrapper").show()):(jQuery(".rch_license_activation_wrapper").show(),jQuery(".rch_license_deactivation_wrapper").hide()),rchSetSuccessMsg(i.data),rchHideLoader()},error:function(e,i){rchHandleAjaxError(e,i)}})}jQuery(document).ready(function(e){jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".rch_content_data_select").length&&jQuery(".rch_content_data_select").chosen(),rchSetToolTip()}),jQuery(document).on("click",".rch_content_data_header",function(){var e=jQuery(this).closest(".rch_section_wrapper").find(".rch_section_content");jQuery(this).hasClass("rch_section_wrapper_selected")?(jQuery(this).removeClass("rch_section_wrapper_selected"),jQuery(this).hasClass("rch_field_mapping_section")&&jQuery(this).closest(".rch_section_wrapper").find(".rch_field_mapping_fields_wrapper").slideUp()):(jQuery(this).addClass("rch_section_wrapper_selected"),jQuery(this).hasClass("rch_field_mapping_section")&&jQuery(this).closest(".rch_section_wrapper").find(".rch_field_mapping_fields_wrapper").slideDown()),e.slideToggle("slow")}),jQuery(document).on("click",".rch_ext_save",function(){rchShowLoader();var e=jQuery(".rch_general_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_ext_save_extensions&"+e,dataType:"json",async:!0,success:function(e){if(rchHideLoader(),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("click",".rch_ext_save_data",function(){var e=!1;if(jQuery(".rch_content_data_input").each(function(){if(""===jQuery(this).val())return e=!0,!0}),e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchFillRequiredFieldText),!1;rchShowLoader();var i=jQuery(".rch_ext_settings_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_ext_save_extension_data&"+i,dataType:"json",async:!0,success:function(e){if(rchHideLoader(),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("show.bs.modal",".modal",function(e){var i=1040+10*jQuery(".modal:visible").length;jQuery(this).css("z-index",i),setTimeout(function(){jQuery(".modal-backdrop").not(".modal-stack").css("z-index",i-1).addClass("modal-stack")},0)}),jQuery(document).on("click",".rch_save_cap_btn",function(){if(""==jQuery(".rch_role_list").val())return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyUsesrRole),!1;rchShowLoader();var e=jQuery(".rch_user_role_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_save_user_cap&"+e,dataType:"json",async:!0,success:function(e){if(rchHideLoader(),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("change",".rch_role_list",function(){rchShowLoader();var e=jQuery(this).val();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_get_user_cap&user_role="+e,dataType:"json",async:!0,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;jQuery(".rch_user_cap").removeAttr("checked"),void 0!==e.cap&&jQuery.each(e.cap,function(e,i){jQuery("."+i).attr("checked","checked")}),rchHideLoader()},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("click",".rch_template_delete_btn",function(){rchShowLoader();var e=jQuery(".rch_template_list").val();if(""==e||null==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyTemplates),!1;jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_delete_tempaltes&templates="+e,dataType:"json",async:!0,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;jQuery(".rch_template_list option:selected").remove(),jQuery(".rch_template_list").trigger("chosen:updated"),rchSetSuccessMsg(e.message),rchHideLoader()},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("click",".rch_template_export_btn",function(){var e=jQuery(".rch_template_list").val();if(""==e||null==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyTemplates),!1;jQuery(".rch_template_export").submit()}),jQuery(document).on("click",".rch_template_import_btn",function(){rchShowLoader();var e=jQuery(".rch_template_file").val();if(""==e||null==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchChooseValidFileText),!1;if("txt"!=e.substr(e.lastIndexOf(".")+1).toLowerCase())return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchChooseValidFileText),!1;var i=jQuery(".rch_template_file").prop("files")[0],t=new FormData;t.append("rch_template_file",i),t.append("action","rch_tempalte_import"),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:t,dataType:"json",contentType:!1,processData:!1,async:!0,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;jQuery(".rch_template_file").val(""),rchGetTemplates(),rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("change",".rch_log_check_all",function(){jQuery(this).is(":checked")?jQuery(this).closest(".rch_log_table").find(".rch_log_check").attr("checked","checked"):jQuery(this).closest(".rch_log_table").find(".rch_log_check").removeAttr("checked")}),jQuery(document).on("change",".rch_log_check",function(){var e=jQuery(this).closest(".rch_log_table");jQuery(this).is(":checked")?e.find(".rch_log_check:checked").length==e.find(".rch_log_check").length&&e.find(".rch_log_check_all").attr("checked","checked"):e.find(".rch_log_check_all").removeAttr("checked")}),jQuery(document).on("click",".rch_log_action_btn",function(){jQuery(".rch_active_section").removeClass("rch_active_section");var e=jQuery(this).closest(".rch_section_content");e.addClass("rch_active_section");var i=e.find(".rch_log_bulk_action").val();return""==i?(rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyActions),!1):0==e.find(".rch_log_check:checked").length?(rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyTemplates),!1):void("delete"==i&&(rchPluginSettings.deleteIds=0,jQuery(".rch_delete_templates_data").modal({backdrop:"static",keyboard:!1,show:!0})))}),jQuery(document).on("click",".rch_process_pause_btn",function(){rch_update_process_status("pause",jQuery(this).closest("tr").find(".rch_log_check").val()),jQuery(this).closest("td").removeClass("rch_action_background").addClass("rch_action_paused"),jQuery(this).closest("tr").find(".rch_log_status").text(rchPluginSettings.rchLocalizeText.rchPaused)}),jQuery(document).on("click",".rch_process_resume_btn",function(){rch_update_process_status("bg",jQuery(this).closest("tr").find(".rch_log_check").val()),jQuery(this).closest("td").removeClass("rch_action_paused").addClass("rch_action_background"),jQuery(this).closest("tr").find(".rch_log_status").text(rchPluginSettings.rchLocalizeText.rchProcessing)}),jQuery(document).on("click",".rch_process_stop_btn",function(){rch_update_process_status("stop",jQuery(this).closest("tr").find(".rch_log_check").val()),jQuery(this).closest("td").removeClass("rch_action_paused rch_action_background"),jQuery(this).closest("tr").find(".rch_log_status").text(rchPluginSettings.rchLocalizeText.rchStopped)}),jQuery(document).on("click",".rch_delete_template_btn",function(){jQuery(this).closest(".rch_section_content").addClass("rch_active_section"),rchPluginSettings.deleteIds=jQuery(this).closest("tr").find(".rch_log_check").val(),jQuery(".rch_delete_templates_data").modal({backdrop:"static",keyboard:!1,show:!0})}),jQuery(document).on("click",".rch_delete_templates",function(){rchShowLoader();var e=jQuery(".rch_active_section"),i="";e.hasClass("rch_schedule_import_section")?i="schedule_import":e.hasClass("rch_schedule_export_section")&&(i="schedule_export");var t="";if(0==rchPluginSettings.deleteIds?(e.find(".rch_log_check:checked").each(function(){t+=jQuery(this).val()+",",jQuery(this).closest("tr").remove()}),t=t.substr(0,t.length-1)):(t=rchPluginSettings.deleteIds,e.find(".rch_log_wrapper_"+t).remove()),rchDeleteTemplates(t,i),0==e.find(".rch_log_check").length)return e.find(".rch_log_empty").show(),!1}),jQuery(document).on("click",".rch_download_template_file_btn",function(){jQuery(".rch_download_file").val(jQuery(this).closest("tr").find(".rch_log_check").val()),jQuery(".rch_download_file_frm").submit()}),jQuery(document).on("click",".rch_template_file_log_btn",function(){jQuery(".rch_download_import_log_id").val(jQuery(this).closest("tr").find(".rch_log_check").val()),jQuery(".rch_download_log_file_frm").submit()}),jQuery(document).on("click",".rch_advanced_options_save",function(){rchShowLoader();var e=0;jQuery(".rch_delete_data_on_unistall").is(":checked")&&(e=1),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_save_advance_option&is_delete_data="+e,dataType:"json",async:!1,success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message),rchHideLoader()},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("click",".rch_activate_license",function(){var e=jQuery(".rch_license_key").val();if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyLicenseKey),!1;rchShowLoader(),rchChangeLicenseStatus("activate",e)}),jQuery(document).on("click",".rch_deactivate_license",function(){rchShowLoader(),rchChangeLicenseStatus("deactivate","")});