"use strict";function rchSetToolTip(){jQuery.isFunction(jQuery.fn.tipso)&&jQuery(".rch_data_tipso").length&&jQuery(".rch_data_tipso").tipso({useTitle:!1,background:"rgba(0,0,0,0.8)",color:"#ffffff",size:"small",tooltipHover:!0})}function rchChangeExport(e){if(!rchValidateExportExt())return rchHideLoader(),!1;rchRefreshExportData(),rchAddProecess("rchGetRuleList"),rchGetRuleList(),"taxonomies"==e?(jQuery(".rch_total_records_wrapper").hide(),jQuery(".rch_taxonomies_types_wrapper").slideDown("slow"),jQuery(".rch_filter_section_wrapper").slideDown("slow"),rchRefreshExportFilters(jQuery(".rch_content_data_rule_fields"),"filter"),rchRefreshExportFilters(jQuery(".rch_content_data_field_list"),"export"),rchRefreshExportFilters(jQuery(".rch_bulk_fields"),"export"),rchRefreshExportFields({},!1),rchAddProecess("rchExportTemplateList"),rchExportTemplateList(e,"","")):""!=e&&(jQuery(".rch_filter_section_wrapper").slideDown("slow"),jQuery(".rch_taxonomies_types_wrapper").slideUp("slow"),rchAddProecess("rchExportRecordCount"),rchAddProecess("rchExportTemplateList"),rchAddProecess("rchSetExportFields"),rchExportRecordCount(),rchExportTemplateList(e,"",""),rchSetExportFields())}function rchIsValidTime(){var e=rchPluginSettings.rchPluginData;if(""!==e){var i=jQuery.parseJSON(e);if(void 0!==i.home&&i.home===rchPluginSettings.rchSiteUrl)return!0}return!0}function rchAddProecess(e){""!==e&&-1===rchPluginSettings.processes.indexOf(e)&&rchPluginSettings.processes.push(e),jQuery(".rch_loader").hasClass("rch_hidden")&&rchShowLoader()}function rchRemoveProecess(e){""!==e&&0!==rchPluginSettings.processes.length&&-1!==rchPluginSettings.processes.indexOf(e)&&rchPluginSettings.processes.splice(rchPluginSettings.processes.indexOf(e),1),0===rchPluginSettings.processes.length&&rchHideLoader()}function rchGetRuleList(){void 0===rchPluginSettings.rchExportData.exportRule?jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_export_get_rule_list",dataType:"json",success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;rchPluginSettings.rchExportData.exportRule=e.rch_export_rule,rchRemoveProecess("rchGetRuleList")},error:function(e,i){rchHandleAjaxError(e,i)}}):rchRemoveProecess("rchGetRuleList")}function rchIsData(){var e=rchPluginSettings.rchPluginData;if(""!==e){var i=jQuery.parseJSON(e);if(1==1)return!0}return!1}function rchAddNewExportRule(e){if(""==jQuery(".rch_export_type_select").val())return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1;var i=jQuery(".rch_content_data_rule_fields option:selected").text(),t=jQuery(".rch_content_data_rule_select option:selected").text(),p=jQuery(".rch_content_data_rule_fields").val(),r=jQuery(".rch_content_data_rule_select").val(),a=jQuery(".rch_content_data_rule_value").val();if(""==r)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectElementText),!1;if(""==p)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportRuleText),!1;void 0===rchPluginSettings.rchExportData.filterRuleNumber&&(rchPluginSettings.rchExportData.filterRuleNumber=1),void 0===rchPluginSettings.rchExportData.filterRule&&(rchPluginSettings.rchExportData.filterRule={});var o="rch_filter_"+rchPluginSettings.rchExportData.filterRuleNumber,n="";if(jQuery(".rch_filter_data_rule").length>0){var l="",s="";"OR"==e?s='checked="checked"':l='checked="checked"',n='<div class="rch_rule_condition_wrapper rch_rule_and_condition_wrapper"><input type="radio" id="rch_content_data_rule_condition_'+o+'_and" name="rch_content_data_rule_condition_'+o+'" class="rch_content_data_rule_condition_value rch_rule_condition_option rch_radio" '+l+' value="AND"/><label class="rch_radio_label" for="rch_content_data_rule_condition_'+o+'_and">'+rchPluginSettings.rchLocalizeText.andText+'</label></div><div class="rch_rule_condition_wrapper"><input type="radio" id="rch_content_data_rule_condition_'+o+'_or" name="rch_content_data_rule_condition_'+o+'" class="rch_content_data_rule_condition_value rch_radio rch_rule_condition_option" '+s+' value="OR"/><label class="rch_radio_label" for="rch_content_data_rule_condition_'+o+'_or">'+rchPluginSettings.rchLocalizeText.orText+"</label></div>",jQuery(".rch_content_added_data_rule .rch_filter_data_rule").last().find(".rch_filter_data_rule_cond_data").html(n)}var _='<tr class="rch_filter_data_rule rch_filter_data_rule_'+o+'" rch_rule_data="'+o+'"><td class="rch_filter_rule_list rch_filter_data_rule_text">'+i+'</td><td class="rch_filter_rule_list rch_filter_data_rule_cond">'+t+'</td><td class="rch_filter_rule_list rch_filter_data_rule_val">" '+a+' "</td><td class="rch_filter_rule_list rch_filter_data_rule_cond_data"></td><td class="rch_filter_rule_list rch_filter_data_rule_action"><i class="fas fa-trash rch_trash_general_btn_icon rch_rule_trash_btn " aria-hidden="true"></i></td></tr>';return rchPluginSettings.rchExportData.filterRule[o]={fieldRule:p,fieldCondition:r,fieldRuleValue:a},rchPluginSettings.rchExportData.filterRuleNumber++,jQuery(".rch_content_added_data_rule").append(_),!0}function rchRefreshExportData(){var e=jQuery(".rch_export_type_select").val();jQuery(".rch_total_records_wrapper").hide(),"shop_order"==e?jQuery(".rch_order_item_row_option_wrapper,.rch_advance_options_row").slideDown():jQuery(".rch_order_item_row_option_wrapper,.rch_advance_options_row").slideUp(),"taxonomies"!=e&&jQuery(".rch_taxonomies_types_wrapper").slideUp("slow"),jQuery(".rch_content_added_data_rule").html(""),jQuery(".rch_field_selection").html(""),jQuery(".rch_export_file_type").val("").trigger("chosen:updated"),jQuery(".rch_wpml_lang_all").prop("checked",!0),jQuery(".rch_csv_field_separator").val(","),jQuery(".rch_export_file_name").val(""),jQuery(".rch_records_per_iteration").val("50"),rchRefreshExportFilters(jQuery(".rch_content_data_rule_fields"),"filter"),rchRefreshExportFilters(jQuery(".rch_content_data_field_list"),"export"),rchRefreshExportFilters(jQuery(".rch_bulk_fields"),"export"),rchRefreshExportRuleFilters("");var i=jQuery(".rch_taxonomies_types_select").val();"taxonomies"==e&&void 0!==rchPluginSettings.rchExportData[e]&&void 0!==rchPluginSettings.rchExportData[e][i]&&void 0!==rchPluginSettings.rchExportData[e][i].totalRecords?delete rchPluginSettings.rchExportData[e][i].totalRecords:"taxonomies"!=e&&void 0!==rchPluginSettings.rchExportData[e]&&void 0!==rchPluginSettings.rchExportData[e].totalRecords&&delete rchPluginSettings.rchExportData[e].totalRecords,rchPluginSettings.rchExportData.filterRule={}}function rchRefreshExportRuleFilters(e){var i='<option value="">'+rchPluginSettings.rchLocalizeText.selectExportRuleText+"</option>"+e;jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".rch_content_data_rule_select").chosen("destroy"),jQuery(".rch_content_data_rule_select").html(i),jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".rch_content_data_rule_select").chosen({search_contains:!0})}function rchSetExportTemplateList(e){var i='<select class="rch_content_data_select rch_template_list_select" name="rch_template_list" >';i+='<option value="">'+rchPluginSettings.rchLocalizeText.selectTemplateText+"</option>",""!=e&&jQuery.each(e,function(e,t){i+='<option value="'+t.id+'">'+t.name+"</option>"}),i+="</select>",jQuery(".rch_template_list_wrapper").html(i),jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".rch_template_list_select").chosen({search_contains:!0}),rchRemoveProecess("rchExportTemplateList")}function rchExportTemplateList(e,i,t){void 0!==rchPluginSettings.rchExportData[e]&&void 0!==rchPluginSettings.rchExportData[e].template?rchSetExportTemplateList(rchPluginSettings.rchExportData[e].template):jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_export_get_template_list&content_type="+e+"&query_type="+i+"&query_data="+t,dataType:"json",success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;void 0!==rchPluginSettings.rchExportData[e]&&null!=rchPluginSettings.rchExportData[e]||(rchPluginSettings.rchExportData[e]=[]),rchPluginSettings.rchExportData[e].template=i.data,rchSetExportTemplateList(i.data)},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchHandleAjaxError(e,i){return rchSetErrorMsg(0===e.status?rchPluginSettings.rchLocalizeText.rch_ajax_not_connect_error:400==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_400_error:404==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_404_error:500==e.status?rchPluginSettings.rchLocalizeText.rch_ajax_internal_server_error:"parsererror"===i?rchPluginSettings.rchLocalizeText.rch_ajax_jason_parse_error:"timeout"===i?rchPluginSettings.rchLocalizeText.rch_ajax_time_out_error:"abort"===i?rchPluginSettings.rchLocalizeText.rch_ajax_request_aborted_error:rchPluginSettings.rchLocalizeText.rch_ajax_uncaught_error+e.responseText),!1}function rchSetErrorMsg(e){rchHideLoader(),jQuery(".rch_error_content").html(e),jQuery(".rch_error_model").modal({backdrop:!0,show:!0})}function rchSetSuccessMsg(e){jQuery.notify({message:'<i class="far fa-check-circle"></i> '+e},{type:"success",placement:{align:"right",from:"bottom"},animate:{enter:"animated fadeInUp",exit:"animated fadeOutDown"}})}function rchShowLoader(){jQuery(".rch_loader").removeClass("rch_hidden")}function rchHideLoader(){jQuery(".rch_loader").addClass("rch_hidden")}function rchSetExportFields(){var e=jQuery(".rch_export_type_select").val(),i=jQuery(".rch_taxonomies_types_select").val();if(void 0!==rchPluginSettings.rchExportData[e]&&null!=rchPluginSettings.rchExportData[e]||(rchPluginSettings.rchExportData[e]=[]),void 0===rchPluginSettings.rchExportData[e][i]&&(rchPluginSettings.rchExportData[e][i]={}),"taxonomies"==e&&void 0!==rchPluginSettings.rchExportData[e][i]&&void 0!==rchPluginSettings.rchExportData[e][i].fields)rchRefreshExportFilters(jQuery(".rch_content_data_rule_fields"),"filter"),rchRefreshExportFilters(jQuery(".rch_content_data_field_list"),"export"),rchRefreshExportFilters(jQuery(".rch_bulk_fields"),"export"),rchRefreshExportFields(rchPluginSettings.rchExportData[e][i].fields,!0);else if("taxonomies"!=e&&void 0!==rchPluginSettings.rchExportData[e].fields)rchRefreshExportFilters(jQuery(".rch_content_data_rule_fields"),"filter"),rchRefreshExportFilters(jQuery(".rch_content_data_field_list"),"export"),rchRefreshExportFilters(jQuery(".rch_bulk_fields"),"export"),rchRefreshExportFields(rchPluginSettings.rchExportData[e].fields,!0);else{var t=jQuery(".rch_export_type_select").val();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_export_field_list&export_type="+t+"&taxonomy_type="+i,dataType:"json",success:function(t){if("error"==t.status)return rchSetErrorMsg(t.message),!1;"taxonomies"==e?(void 0===rchPluginSettings.rchExportData[e][i]&&(rchPluginSettings.rchExportData[e][i]={}),rchPluginSettings.rchExportData[e][i].fields=t.fields):"taxonomies"!=e&&(rchPluginSettings.rchExportData[e].fields=t.fields),rchRefreshExportFilters(jQuery(".rch_content_data_rule_fields"),"filter"),rchRefreshExportFilters(jQuery(".rch_content_data_field_list"),"export"),rchRefreshExportFilters(jQuery(".rch_bulk_fields"),"export"),rchRefreshExportFields(t.fields,!0)},error:function(e,i){rchHandleAjaxError(e,i)}})}}function rchRefreshExportFilters(e,i){var t={},p=jQuery(".rch_export_type_select").val(),r=jQuery(".rch_taxonomies_types_select").val();if(void 0!==rchPluginSettings.rchExportData[p]&&("taxonomies"==p&&void 0!==rchPluginSettings.rchExportData[p][r].fields?t=rchPluginSettings.rchExportData[p][r].fields:"taxonomies"!=p&&void 0!==rchPluginSettings.rchExportData[p].fields&&(t=rchPluginSettings.rchExportData[p].fields)),"filter"==i)var a='<option value="">'+rchPluginSettings.rchLocalizeText.selectElementText+"</option>";else a="";return t&&jQuery.each(t,function(e,t){t&&(a+=rchExportTypeGenerator(e,t,i))}),jQuery.isFunction(jQuery.fn.chosen)&&e.chosen("destroy"),e.html(a),jQuery.isFunction(jQuery.fn.chosen)&&e.chosen({search_contains:!0}),!1}function rchExportTypeGenerator(e,i,t){if(void 0===i.data||"filter"==t&&void 0!==i.isFiltered&&0==i.isFiltered||"export"==t&&void 0!==i.isExported&&0==i.isExported)return"";var p="",r="";return p+='<optgroup label="'+i.title+'">',jQuery.each(i.data,function(e,i){r=encodeURIComponent(JSON.stringify(i)),p+='<option value="'+r+'" >'+i.name+"</option>"}),p+="</optgroup>"}function rchGetExportFields(e){if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1;if(void 0!==rchPluginSettings.rchExportData[e]&&void 0!==rchPluginSettings.rchExportData[e].fields&&void 0===rchPluginSettings.rchExportData[e].rchExportAllFields){void 0===rchPluginSettings.rchExportData[e]&&(rchPluginSettings.rchExportData[e]={}),void 0===rchPluginSettings.rchExportData[e].rchExportAllFields&&(rchPluginSettings.rchExportData[e].rchExportAllFields={}),void 0===rchPluginSettings.rchExportData[e].rchExportFields&&(rchPluginSettings.rchExportData[e].rchExportFields={}),void 0===rchPluginSettings.rchExportData[e].rchExportDefaultFields&&(rchPluginSettings.rchExportData[e].rchExportDefaultFields={}),void 0===rchPluginSettings.rchExportData[e].rchExportFilterFields&&(rchPluginSettings.rchExportData[e].rchExportFilterFields={});var i=0,t=0,p=rchPluginSettings.rchExportData[e].fields;jQuery.each(p,function(p,r){r&&(isFiltered=!0,isExportFields=!0,void 0!==r.isFiltered&&0==r.isFiltered?isFiltered=!1:(rchPluginSettings.rchExportData[e].rchExportFilterFields[t]={},rchPluginSettings.rchExportData[e].rchExportFilterFields[t].data={},rchPluginSettings.rchExportData[e].rchExportFilterFields[t].title=r.title),void 0!==r.isExportFields&&0==r.isExportFields?isExportFields=!1:(rchPluginSettings.rchExportData[e].rchExportFields[t]={},rchPluginSettings.rchExportData[e].rchExportFields[t].data={},rchPluginSettings.rchExportData[e].rchExportFields[t].title=r.title),jQuery.each(r.data,function(p,r){rchPluginSettings.rchExportData[e].rchExportAllFields[i]=r,isFiltered&&(rchPluginSettings.rchExportData[e].rchExportFilterFields[t].data[i]=i),isExportFields&&(rchPluginSettings.rchExportData[e].rchExportFields[t].data[i]=i),void 0!==r.isDefault&&1==r.isDefault&&(rchPluginSettings.rchExportData[e].rchExportDefaultFields[i]=i),i++}),t++)})}return!0}function rchExportTypeGenerator1(e,i){var t="";return jQuery.each(e,function(e,p){t+='<optgroup label="'+p.title+'">',jQuery.each(p.data,function(e,p){void 0!==rchPluginSettings.rchExportData[i].rchExportAllFields[p]&&(t+='<option value="'+p+'" >'+rchPluginSettings.rchExportData[i].rchExportAllFields[p].name+"</option>")}),t+="</optgroup>"}),t}function rch_get_random_unique_index(e){var i=Math.floor(1e8*Math.random()+1);return void 0===e||void 0===e[i]?i:rch_get_random_unique_index(e)}function rchRefreshExportFields(e,i){var t=rchGenerateFields(e,i);jQuery(".rch_field_selection").html(t),jQuery.isFunction(jQuery.fn.rch_editable)&&jQuery(".rch_fields_title:not(.rch_editable_container)").each(function(){jQuery(this).addClass("rch_editable_container").rch_editable("click",function(e){})}),jQuery.isFunction(jQuery.fn.sortable)&&(jQuery(".rch_field_selection").hasClass("ui-sortable")?jQuery(".rch_field_selection").sortable("refresh"):jQuery(".rch_field_selection").sortable({placeholder:"rch_sortable_data_highlight",handle:".rch_fields_handle",helper:"clone"})),rchRemoveProecess("rchSetExportFields")}function rchGenerateFields(e,i){var t="";return"object"==typeof e&&null!=e&&(void 0===rchPluginSettings.rchExportData.rchFieldData&&(rchPluginSettings.rchExportData.rchFieldData={}),jQuery.each(e,function(e,p){if(!p||void 0===p.data||1==i&&(void 0===p.isDefault||void 0!==p.isDefault&&1!=p.isDefault)||void 0!==p.isExported&&0==p.isExported)return"";var r="";jQuery.each(p.data,function(e,p){(1==i&&void 0!==p.isDefault&&1==p.isDefault||0==i)&&(r=encodeURIComponent(JSON.stringify(p)),t+=rchGenerateFieldsData(r,r,p.name))})})),t}function rchGenerateFieldsData(e,i,t){var p='<div class="rch_fields_wrapper">';return p+='<div class="rch_fields_inner_wrapper">',p+='<div class="rch_fields_title_wrapper">',p+='<label class="rch_fields_title" field_data="'+e+'" old_field_data="'+i+'">'+t+"</label>",p+="</div>",p+='<div class="rch_fields_options_wrapper">',p+='<div class="rch_fields_options rch_fields_settings"><i class="fas fa-wrench" aria-hidden="true"></i></div>',p+='<div class="rch_fields_options rch_fields_remove"><i class="fas fa-trash" aria-hidden="true"></i></div>',p+='<div class="rch_fields_options rch_fields_handle"><i class="fas fa-arrows-alt" aria-hidden="true"></i></div>',p+="</div>",p+="</div>",p+="</div>"}function rchExportRecordCount(){var e=jQuery(".rch_export_frm").serialize(),i=jQuery(".rch_export_type_select").val();if(""==i)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1;var t=jQuery(".rch_taxonomies_types_select").val(),p=rchGetFieldRuleData();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_export_records_count&"+e+"&rch_filter_rule="+p,dataType:"json",success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;void 0===rchPluginSettings.rchExportData[i]&&(rchPluginSettings.rchExportData[i]={}),"taxonomies"==i?(void 0===rchPluginSettings.rchExportData[i][t]&&(rchPluginSettings.rchExportData[i][t]={}),rchPluginSettings.rchExportData[i][t].totalRecords=e.totalRecords):rchPluginSettings.rchExportData[i].totalRecords=e.totalRecords,jQuery(".rch_total_records").html(e.totalRecords),jQuery(".rch_total_records_wrapper").show(),rchRemoveProecess("rchExportRecordCount")},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchAddAllFields(){var e=jQuery(".rch_export_type_select").val();if(void 0!==rchPluginSettings.rchExportData[e]){var i=jQuery(".rch_taxonomies_types_select").val();"taxonomies"==e&&void 0!==rchPluginSettings.rchExportData[e][i]&&void 0!==rchPluginSettings.rchExportData[e][i].fields?rchRefreshExportFields(rchPluginSettings.rchExportData[e][i].fields,!1):"taxonomies"!=e&&void 0!==rchPluginSettings.rchExportData[e].fields&&rchRefreshExportFields(rchPluginSettings.rchExportData[e].fields,!1)}}function rchSaveTemplate(e,i){var t=jQuery(".rch_export_type_select").val();if(""===t)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1;if(0===e&&""===i)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.enterTemplateNameText),!1;rchShowLoader();var p="";jQuery(".rch_field_selection .rch_fields_title").each(function(e,i){var t=jQuery(this).html(),r=(i=decodeURIComponent(jQuery(this).attr("field_data")),decodeURIComponent(jQuery(this).attr("old_field_data")));p+=t+"|~|"+i+"|~|"+r+"~||~"}),jQuery(".rch_export_fields_data").val(p);var r=rchGetFieldRuleData(),a=jQuery(".rch_export_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_export_save_template&template_name="+i+"&template_id="+e+"&rch_export_condition="+r+"&"+a,dataType:"json",success:function(p){if(rchHideLoader(),"error"==p.status)return rchSetErrorMsg(p.message),!1;0===e?void 0!==p.template_id&&(jQuery(".rch_update_template_btn_wrapper").hide(),jQuery(".rch_template_list_select").append(new Option(i,p.template_id)).val("").trigger("chosen:updated")):void 0!==rchPluginSettings.rchExportData[t]&&"undefined"!=rchPluginSettings.rchExportData[t].templateData&&rchPluginSettings.rchExportData[t].templateData[e]&&delete rchPluginSettings.rchExportData[t].templateData[e],rchSetSuccessMsg(p.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchSetExportTemplate(e){if(void 0!==e.rch_csv_field_separator&&""!=e.rch_csv_field_separator?jQuery(".rch_csv_field_separator").val(e.rch_csv_field_separator):jQuery(".rch_csv_field_separator").val(","),void 0!==e.rch_export_file_name&&""!=e.rch_export_file_name?jQuery(".rch_export_file_name").val(e.rch_export_file_name):jQuery(".rch_export_file_name").val(""),void 0!==e.rch_export_file_type&&""!=e.rch_export_file_type?jQuery(".rch_export_file_type").val(e.rch_export_file_type).trigger("chosen:updated"):jQuery(".rch_export_file_type").val("").trigger("chosen:updated"),void 0!==e.rch_records_per_iteration&&""!=e.rch_records_per_iteration?jQuery(".rch_records_per_iteration").val(e.rch_records_per_iteration):jQuery(".rch_records_per_iteration").val(50),void 0!==e.rch_export_include_bom&&""!=e.rch_export_include_bom?jQuery(".rch_export_include_bom").prop("checked",!0):jQuery(".rch_export_include_bom").prop("checked",!1),void 0!==e.rch_order_item_sigle_row&&""!=e.rch_order_item_sigle_row?(jQuery(".rch_order_item_sigle_row").prop("checked",!0),jQuery(".rch_order_item_fill_empty_wrapper").slideDown()):(jQuery(".rch_order_item_sigle_row").prop("checked",!1),jQuery(".rch_order_item_fill_empty_wrapper").slideUp()),void 0!==e.rch_order_item_fill_empty&&""!=e.rch_order_item_fill_empty?jQuery(".rch_order_item_fill_empty").prop("checked",!0):jQuery(".rch_order_item_fill_empty").prop("checked",!1),rchPluginSettings.rchExportData.filterRule={},rchPluginSettings.rchExportData.filterRuleNumber=1,jQuery(".rch_content_added_data_rule").html(""),void 0!==e.rch_export_condition&&""!=e.rch_export_condition){jQuery(".rch_content_added_data_rule").html("");var i=e.rch_export_condition.split("~`|`~");if(void 0!==i[0]){var t="";jQuery.each(i,function(e,i){if(""!=i){var p=i.split("`|~`");jQuery(".rch_content_data_rule_fields").val(encodeURIComponent(p[0])).trigger("change"),jQuery(".rch_content_data_rule_select").val(encodeURIComponent(p[1])).trigger("change"),jQuery(".rch_content_data_rule_value").val(encodeURIComponent(p[2])),rchAddNewExportRule(t),t=void 0!==p[3]&&"AND"===p[3]?"AND":"OR"}})}jQuery(".rch_content_data_rule_fields").val("").trigger("chosen:updated"),jQuery(".rch_content_data_rule_select").val("").trigger("chosen:updated"),jQuery(".rch_content_data_rule_value").val("")}if(void 0!==e.rch_wpml_lang&&""!=e.rch_wpml_lang&&jQuery(".rch_wpml_lang_"+e.rch_wpml_lang).prop("checked",!0),void 0!==e.fields_data&&""!=e.fields_data){var p="",r=e.fields_data.split("~||~");jQuery.each(r,function(e,i){var t=i.split("|~|"),r=t[0],a=encodeURIComponent(t[1]),o=encodeURIComponent(t[2]);""!=r&&(p+=rchGenerateFieldsData(a,o,r))}),jQuery(".rch_field_selection").html(p),jQuery.isFunction(jQuery.fn.sortable)&&jQuery(".rch_field_selection").sortable("refresh"),jQuery.isFunction(jQuery.fn.rch_editable)&&jQuery(".rch_fields_title:not(.rch_editable_container)").each(function(){jQuery(this).addClass("rch_editable_container").rch_editable("click",function(e){})})}rchAddProecess("rchExportRecordCount"),rchExportRecordCount()}function rchProcessExport(e){if(!rchValidateExport())return!1;rchPluginSettings.rchExportData.exportStatus="export",rchPluginSettings.rchExportData.isPackage=e,rchPluginSettings.rchExportData.exportFileType=jQuery(".rch_export_file_type").val(),rchGenerateFile()}function rchPreviewData(){var e=jQuery(".rch_export_type_select").val(),i=jQuery(".rch_taxonomies_types_select").val(),t=0;"taxonomies"==e&&""!=i?void 0!==rchPluginSettings.rchExportData[e][i]&&(t=rchPluginSettings.rchExportData[e][i].totalRecords):t=rchPluginSettings.rchExportData[e].totalRecords,rchGetFieldsData();var p=rchGetFieldRuleData(),r=jQuery(".rch_export_frm").serializeArray();rchPluginSettings.rchExportData.rchPreviewTable=jQuery(".rch_preview").DataTable({processing:!0,serverSide:!0,searching:!1,ordering:!1,ajax:{url:rchPluginSettings.rchAjaxURL,type:"POST",cache:!1,data:function(e){delete e.columns,e.action="rch_export_get_preview_data",e.rch_filter_rule=p,e.total=t,jQuery.each(r,function(i,t){e[t.name]=t.value})},complete:function(e){}}}),jQuery(".rch_preview_model").modal("show")}function rchValidateExport(){var e=jQuery(".rch_export_type_select").val(),i=jQuery(".rch_taxonomies_types_select").val();return""==e?(rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1):"taxonomies"==e&&""==i?(rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTaxTypeText),!1):jQuery(".rch_field_selection .rch_fields_title").length<1?(rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchExportEmptyColumnText),!1):void 0===rchPluginSettings.rchExportData[e]||!("taxonomies"!=e&&void 0!==rchPluginSettings.rchExportData[e].totalRecords&&rchPluginSettings.rchExportData[e].totalRecords<1||"taxonomies"==e&&void 0!==rchPluginSettings.rchExportData[e][i].totalRecords&&rchPluginSettings.rchExportData[e][i].totalRecords<1)||(rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchExportEmptyDataText),!1)}function rchValidateExportExt(){var e=jQuery(".rch_export_type_select").val(),i=!0,t="";return""==e?(t=rchPluginSettings.rchLocalizeText.selectExportTypeText,i=!1):"users"==e?rchPluginSettings.rchExtensions.indexOf("rch_user_export")<0&&(t=rchPluginSettings.rchLocalizeText.rchExportUserExtDisableText,i=!1):"shop_customer"==e?rchPluginSettings.rchExtensions.indexOf("rch_wc_export")<0?(t=rchPluginSettings.rchLocalizeText.rchExportWCExtDisableText,i=!1):rchPluginSettings.rchExtensions.indexOf("rch_user_export")<0&&(t=rchPluginSettings.rchLocalizeText.rchExportUserExtDisableText,i=!1):"shop_order"!=e&&"shop_coupon"!=e&&"product"!=e||rchPluginSettings.rchExtensions.indexOf("rch_wc_export")<0&&(t=rchPluginSettings.rchLocalizeText.rchExportWCExtDisableText,i=!1),0!=i||(jQuery(".rch_export_type_select").val("").trigger("chosen:updated"),rchRefreshExportData(),rchSetErrorMsg(t),!1)}function rchValidateProcess(){
	return!1!==rchIsValidTime()&&!1!==rchIsData()}function rchGenerateFile(){var e=jQuery(".rch_export_type_select").val();void 0!==rchPluginSettings.rchExportData[e]&&null!=rchPluginSettings.rchExportData[e]||(rchPluginSettings.rchExportData[e]=[]),jQuery(".rch_export_notice").show(),1==rchPluginSettings.rchExportData.isPackage&&rchAddAllFields(),rchGetFieldsData();var i=rchGetFieldRuleData(),t=jQuery(".rch_export_frm").serialize(),p=0;if("undefined"!=rchPluginSettings.rchExportData[e])if("taxonomies"==e){var r=jQuery(".rch_taxonomies_types_select").val();"undefined"!=rchPluginSettings.rchExportData[e][r]&&"undefined"!=rchPluginSettings.rchExportData[e][r].totalRecords&&rchPluginSettings.rchExportData[e][r].totalRecords>0&&(p=rchPluginSettings.rchExportData[e][r].totalRecords)}else"undefined"!=rchPluginSettings.rchExportData[e].totalRecords&&rchPluginSettings.rchExportData[e].totalRecords>0&&(p=rchPluginSettings.rchExportData[e].totalRecords);jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_export_create_data&is_package="+rchPluginSettings.rchExportData.isPackage+"&"+t+"&rch_filter_rule="+i+"&total="+p,dataType:"json",success:function(e){if("error"==e.status)return rchSetErrorMsg(e.message),!1;0!=e.rch_export_id&&(rchResetExportOptions(),jQuery(".rch_download_exported_file_id").val(e.export_id),rchPluginSettings.rchExportData.rchExportId=e.export_id,delete rchPluginSettings.rchExportData.exportProcess,rchExportAllData())},error:function(e,i){rchHandleAjaxError(e,i)}})}function rchResetExportOptions(){jQuery(".rch_remote_export_wrapper").hide(),jQuery(".rch_export_process .progress-bar").removeClass("rch_completed"),jQuery(".progress-bar").css("width","0%").html("0%"),jQuery(".rch_export_process_header").html(jQuery(".rch_export_process_header").attr("process_text")),jQuery(".rch_export_process_per").html("0%"),jQuery(".rch_export_time_elapsed_value").html("00:00:00"),jQuery(".rch_export_total_records_value").html("0"),jQuery(".rch_export_process_btn_wrapper").hide(),jQuery(".rch_export_process_option_btn_wrapper").show(),jQuery(".rch_export_popup_wrapper").modal({backdrop:"static",keyboard:!1,show:!0}),clearInterval(rchPluginSettings.rchExportData.exportInterval),rchPluginSettings.rchExportData.exportIntervalSec=0,rchPluginSettings.rchExportData.exportInterval=setInterval(function(){jQuery(".rch_export_time_elapsed_value").html(rchElapsedTimeString(rchPluginSettings.rchExportData.exportIntervalSec++))},1e3)}function rchPrettyTimeString(e){return(e<10?"0":"")+e}function rchElapsedTimeString(e){var i=Math.floor(e/3600);e%=3600;var t=Math.floor(e/60);e%=60;var p=Math.floor(e);return(i=rchPrettyTimeString(i))+":"+(t=rchPrettyTimeString(t))+":"+(p=rchPrettyTimeString(p))}function rchExportAllData(){var e=jQuery(".rch_export_type_select").val();if(void 0!==rchPluginSettings.rchExportData.exportStatus)if("export"==rchPluginSettings.rchExportData.exportStatus)rchPluginSettings.rchExportData.exportProcess=jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_export_update_data&export_id="+rchPluginSettings.rchExportData.rchExportId,dataType:"json",success:function(i){if("error"==i.status)return rchSetErrorMsg(i.message),!1;if(0!=i.rch_export_id&&"completed"!=i.export_status){var t=i.exported_records,p=0;if(t>0)if("taxonomies"==e){var r=jQuery(".rch_taxonomies_types_select").val();p=rchPluginSettings.rchExportData[e][r].totalRecords>0?parseInt(100*t/rchPluginSettings.rchExportData[e][r].totalRecords):100}else p=rchPluginSettings.rchExportData[e].totalRecords>0?parseInt(100*t/rchPluginSettings.rchExportData[e].totalRecords):100;p=p<100?p:100,jQuery(".progress-bar").css("width",p+"%").html(p+"%"),jQuery(".rch_export_total_records_value").html(t),rchExportAllData()}else(1==rchPluginSettings.rchExportData.isPackage||""!=rchPluginSettings.rchExportData.exportFileType&&"csv"!=rchPluginSettings.rchExportData.exportFileType)&&rchPrepareExportFile(),jQuery(".rch_export_proccess_title").html(rchPluginSettings.rchLocalizeText.rchExportCompletedText),t=i.exported_records,p=100,clearInterval(rchPluginSettings.rchExportData.exportInterval),jQuery(".rch_export_process_btn_wrapper").show(),jQuery(".rch_remote_export_wrapper").show(),jQuery(".rch_export_process_option_btn_wrapper").hide(),jQuery(".progress-bar").css("width","100%").html("100%"),jQuery(".rch_export_total_records_value").html(t),jQuery(".rch_export_process .progress-bar").addClass("rch_completed"),jQuery(".rch_export_notice").hide()},error:function(e,i){void 0!==rchPluginSettings.rchExportData.exportStatus&&"stop"==rchPluginSettings.rchExportData.exportStatus||rchHandleAjaxError(e,i)}});else if("bg"==rchPluginSettings.rchExportData.exportStatus)rch_update_export_status("bg");else if("pause"==rchPluginSettings.rchExportData.exportStatus){jQuery(".rch_export_process_pause_btn").hide(),jQuery(".rch_export_process_resume_btn").show();var i=setInterval(function(){(!rchPluginSettings.rchExportData.exportProcess||rchPluginSettings.rchExportData.exportProcess&&4==rchPluginSettings.rchExportData.exportProcess.readyState)&&(jQuery(".rch_process_action").modal("hide"),clearInterval(i))},1e3);clearInterval(rchPluginSettings.rchExportData.exportInterval)}else"stop"==rchPluginSettings.rchExportData.exportStatus&&setTimeout(function(){jQuery(".rch_process_action").modal("hide"),jQuery(".rch_export_popup_wrapper").modal("hide")},2e3)}function rchPrepareExportFile(){rchSetProcessLoader({rchPrepareFile:rchPluginSettings.rchLocalizeText.rchPrepareFile}),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_export_prepare_file&export_id="+rchPluginSettings.rchExportData.rchExportId,dataType:"json",success:function(e){if(rchUpdateProcessLoader("rchPrepareFile"),"error"==e.status)return rchSetErrorMsg(e.message),!1},error:function(e,i){rchHandleAjaxError(e,i)}})}function rch_update_export_status(e){setTimeout(function(){jQuery(".rch_process_action").modal("hide"),jQuery(".rch_export_popup_wrapper").modal("hide")},1500),rchShowLoader(),jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_export_update_status&rch_export_id="+rchPluginSettings.rchExportData.rchExportId+"&process_status="+e,dataType:"json",success:function(e){if(rchHideLoader(),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}}),rchHideLoader()}function rchGetFieldsData(){var e="";jQuery(".rch_field_selection .rch_fields_title").each(function(i,t){var p=jQuery(this).html(),r=(t=decodeURIComponent(jQuery(this).attr("field_data")),decodeURIComponent(jQuery(this).attr("old_field_data")));e+=p+"|~|"+t+"|~|"+r+"~||~"}),jQuery(".rch_export_fields_data").val(e)}function rchGetFieldRuleData(){var e="";return void 0!==rchPluginSettings.rchExportData.filterRule&&jQuery.each(rchPluginSettings.rchExportData.filterRule,function(i,t){var p="";jQuery(".rch_filter_data_rule_"+i).length&&jQuery(".rch_filter_data_rule_"+i).find(".rch_rule_condition_option:checked").length&&(p=jQuery(".rch_filter_data_rule_"+i).find(".rch_rule_condition_option:checked").val()),e+=decodeURIComponent(t.fieldRule)+"`|~`"+t.fieldCondition+"`|~`"+t.fieldRuleValue+"`|~`"+p+"~`|`~"}),e.replace(/&/g,"&amp;")}function rchSetProcessLoader(e){var i="";jQuery.each(e,function(e,t){i+='<div class="rch_task_wrapper '+e+'" >',i+='<div class="rch_task_icon_wrapper rch_task_processing_icon"><i class="fas fa-spinner fa-spin rch_spinner_btn_icon"></i></div>',i+='<div class="rch_task_icon_wrapper rch_task_completed_icon"><i class="fas fa-check-circle rch_general_btn_icon " aria-hidden="true"></i></div>',i+='<div class="rch_task_title">'+t+"</div>",i+="</div>"}),jQuery(".rch_task_list").html(i),jQuery(".rch_processing_data").modal({backdrop:"static",keyboard:!1,show:!0})}function rchUpdateProcessLoader(e){if(jQuery("."+e).addClass("task_completed"),!jQuery(".rch_task_list").find(".rch_task_wrapper:not(.task_completed)").length){jQuery(".rch_processing_data").modal("hide");var i=setInterval(function(){jQuery(".rch_processing_data").hasClass("show")?jQuery(".rch_processing_data").modal("hide"):clearInterval(i)},1e3)}}jQuery(document).ready(function(e){null==rchPluginSettings&&(rchPluginSettings=[]),null==rchPluginSettings.rchExportData&&(rchPluginSettings.rchExportData=[]),null==rchPluginSettings.processes&&(rchPluginSettings.processes=[]),jQuery.isFunction(jQuery.fn.chosen)&&jQuery(".rch_content_data_select").length&&jQuery(".rch_content_data_select").chosen({search_contains:!0}),jQuery.isFunction(jQuery.fn.autoComplete)&&jQuery(".rch_auto_complete").length&&jQuery(".autoComplete").autoComplete({minChars:0,source:function(e,t){e=e.toLowerCase();var p=[["Australia","au"],["Austria","at"],["Brasil","br"],["Bulgaria","bg"],["Canada","ca"],["China","cn"],["Czech Republic","cz"],["Denmark","dk"],["Finland","fi"],["France","fr"],["Germany","de"],["Hungary","hu"],["India","in"],["Italy","it"],["Japan","ja"],["Netherlands","nl"],["Norway","no"],["Portugal","pt"],["Romania","ro"],["Russia","ru"],["Spain","es"],["Swiss","ch"],["Turkey","tr"],["USA","us"]],r=[];for(i=0;i<p.length;i++)~(p[i][0]+" "+p[i][1]).toLowerCase().indexOf(e)&&r.push(p[i]);t(r)}}),rchSetToolTip()}),jQuery(document).on("click",".rch_content_data_header",function(){var e=jQuery(this).closest(".rch_section_wrapper").find(".rch_section_content");jQuery(this).hasClass("rch_section_wrapper_selected")?(jQuery(this).removeClass("rch_section_wrapper_selected"),jQuery(this).hasClass("rch_field_mapping_section")&&jQuery(this).closest(".rch_section_wrapper").find(".rch_field_mapping_fields_wrapper").slideUp()):(jQuery(this).addClass("rch_section_wrapper_selected"),jQuery(this).hasClass("rch_field_mapping_section")&&jQuery(this).closest(".rch_section_wrapper").find(".rch_field_mapping_fields_wrapper").slideDown()),e.slideToggle("slow")}),jQuery(document).on("change",".rch_scheduled_send_email_chk",function(){jQuery(this).closest("td").find(".rch_options_data_send_mail").slideToggle()}),jQuery(document).on("change",".rch_export_type_select",function(){rchShowLoader();var e=jQuery(this).val();jQuery(".rch_update_template_btn_wrapper").hide(),jQuery(".rch_content_data").attr("class","rch_content_data rch_"+e),rchChangeExport(e)}),jQuery(document).on("change",".rch_content_data_rule_fields",function(){var e,i=jQuery(this).val(),t=jQuery.parseJSON(decodeURIComponent(i));if(""!=i){var p=!1;void 0!==t.isDate&&1==t.isDate?(e=rchPluginSettings.rchExportData.exportRule.rch_date,p=!0):e=void 0!==t.isTax&&1==t.isTax?rchPluginSettings.rchExportData.exportRule.rch_tax:void 0!==t.isCapability&&1==t.isCapability?rchPluginSettings.rchExportData.exportRule.rch_capabilities:void 0!==t.isUser&&1==t.isUser?rchPluginSettings.rchExportData.exportRule.rch_user:void 0!==t.isTermParent&&1==t.isTermParent?rchPluginSettings.rchExportData.exportRule.rch_term_parent_slug:rchPluginSettings.rchExportData.exportRule.default,!0===p?jQuery(".rch_value_hints_container").show():jQuery(".rch_value_hints_container").hide();var r="";jQuery.each(e,function(e,i){r+='<option value="'+e+'">'+i+"</option>"}),rchRefreshExportRuleFilters(r)}}),jQuery(document).on("click",".rch_save_add_rule_btn",function(){rchShowLoader(),rchAddNewExportRule("AND")?(jQuery(".rch_content_data_rule_fields").val("").trigger("chosen:updated"),jQuery(".rch_content_data_rule_select").val("").trigger("chosen:updated"),jQuery(".rch_content_data_rule_value").val(""),rchAddProecess("rchExportRecordCount"),rchExportRecordCount()):rchHideLoader()}),jQuery(document).on("click",".rch_content_data_rule_select",function(){var e=jQuery(this).val();"is_empty"==e||"is_not_empty"==e?jQuery(".rch_content_data_rule_value").hide():jQuery(".rch_content_data_rule_value").show()}),jQuery(document).on("show.bs.modal",".modal",function(e){var i=1040+10*jQuery(".modal:visible").length;jQuery(this).css("z-index",i),setTimeout(function(){jQuery(".modal-backdrop").not(".modal-stack").css("z-index",i-1).addClass("modal-stack")},0)}),jQuery(document).on("change",".rch_taxonomies_types_select",function(){rchShowLoader(),jQuery(".rch_content_added_data_rule").html(""),rchAddProecess("rchSetExportFields"),rchSetExportFields(),rchAddProecess("rchExportRecordCount"),rchExportRecordCount()}),jQuery(document).on("click",".rch_rule_trash_btn",function(){rchShowLoader();var e=jQuery(this).closest(".rch_filter_data_rule").attr("rch_rule_data");jQuery(this).closest(".rch_filter_data_rule").remove(),jQuery(".rch_filter_data_rule").last().find(".rch_filter_data_rule_cond_data").html(""),void 0!==rchPluginSettings.rchExportData.filterRule[e]&&delete rchPluginSettings.rchExportData.filterRule[e],rchAddProecess("rchExportRecordCount"),rchExportRecordCount()}),jQuery(document).on("change",".rch_rule_condition_option",function(){rchShowLoader(),rchAddProecess("rchExportRecordCount"),rchExportRecordCount()}),jQuery(document).on("click",".rch_fields_remove",function(){jQuery(this).closest(".rch_fields_wrapper").remove()}),jQuery(document).on("click",".rch_fields_remove_all",function(){jQuery(".rch_field_selection").html("")}),jQuery(document).on("click",".rch_fields_add_all",function(){rchAddAllFields()}),jQuery(document).on("click",".rch_fields_add_new",function(){if(""==jQuery(".rch_export_type_select").val())return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1;jQuery(".rch_export_php_fun_data").val(""),jQuery(".rch_export_php_fun").prop("checked",!1),jQuery(".rch_export_php_fun_inner_wrapper").hide(),jQuery(".rch_field_editor_date_field_wrapper").hide();var e=jQuery(".rch_content_data_field_list option:first").text(),i=jQuery(".rch_content_data_field_list option:first").val();jQuery(".rch_field_editor_data").val(e),jQuery(".rch_content_data_field_list").val(i).trigger("chosen:updated"),jQuery(".rch_field_editor_product_option_field").hide(),jQuery(".rch_field_editor_model").modal("show")}),jQuery(document).on("click",".rch_add_bulk_fields",function(){if(""===jQuery(".rch_export_type_select").val())return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1;jQuery(".rch_bulk_fields").val("").trigger("chosen:updated"),jQuery(".rch_bulk_fields_model").modal("show")}),jQuery(document).on("click",".rch_add_bulk_field_btn",function(){var e=jQuery(".rch_bulk_fields").val();if(""===e||null===e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchExportEmptyFieldText),!1;var i="";jQuery.each(e,function(e,t){if(""!=t){var p=jQuery.parseJSON(decodeURIComponent(t));i+=rchGenerateFieldsData(t,t,p.name)}}),jQuery(".rch_field_selection").append(i),jQuery.isFunction(jQuery.fn.sortable)&&jQuery(".rch_field_selection").sortable("refresh"),jQuery.isFunction(jQuery.fn.rch_editable)&&jQuery(".rch_fields_title:not(.rch_editable_container)").each(function(){jQuery(this).addClass("rch_editable_container").rch_editable("click",function(e){})}),jQuery(".rch_bulk_fields_model").modal("hide")}),jQuery(document).on("click",".rch_fields_settings",function(){jQuery(".rch_export_type_select").val();jQuery(".rch_fields_title_active").removeClass("rch_fields_title_active");var e=jQuery(this).closest(".rch_fields_wrapper");e.addClass("rch_fields_title_active");var i=e.find(".rch_fields_title").html(),t=e.find(".rch_fields_title").attr("old_field_data"),p=e.find(".rch_fields_title").attr("field_data"),r=jQuery.parseJSON(decodeURIComponent(p));void 0!==r.isPhp&&1==r.isPhp?(jQuery(".rch_export_php_fun").prop("checked",!0),jQuery(".rch_export_php_fun_inner_wrapper").show()):(jQuery(".rch_export_php_fun").prop("checked",!1),jQuery(".rch_export_php_fun_inner_wrapper").hide()),"undefined"==r.metaKey||"_upsell_ids"!=r.metaKey&&"_crosssell_ids"!=r.metaKey?jQuery(".rch_field_editor_product_option_field").hide():("undefined"!=r.UpCrossSell?jQuery(".rch_field_editor_product_options_field").val(r.UpCrossSell).trigger("chosen:updated"):jQuery(".rch_field_editor_product_options_field").val("sku").trigger("chosen:updated"),jQuery(".rch_field_editor_product_option_field").show()),void 0!==r.phpFun?jQuery(".rch_export_php_fun_data").val(r.phpFun):jQuery(".rch_export_php_fun_data").val(""),"undefined"!=r.isDate&&1==r.isDate?(void 0!==r.dateType?jQuery(".rch_field_editor_date_field").val(r.dateType).trigger("chosen:updated"):jQuery(".rch_field_editor_date_field").val("php").trigger("chosen:updated"),void 0!==r.dateFormat?jQuery(".rch_field_editor_date_field_format").val(r.dateFormat):jQuery(".rch_field_editor_date_field_format").val(""),jQuery(".rch_field_editor_date_field_wrapper").show()):jQuery(".rch_field_editor_date_field_wrapper").hide(),jQuery(".rch_field_editor_data").val(i),jQuery(".rch_content_data_field_list").val(t).trigger("chosen:updated"),jQuery(".rch_field_editor_model").modal("show")}),jQuery(document).on("change",".rch_export_php_fun",function(){jQuery(".rch_export_php_fun_inner_wrapper").slideToggle("slow")}),jQuery(document).on("click",".rch_export_save_field_btn",function(){jQuery(".rch_export_type_select").val();var e=jQuery(".rch_field_editor_data").val();if(""==e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchExportEmptyFieldText),!1;var i=jQuery(".rch_content_data_field_list").val();if(""!=i){var t=jQuery.parseJSON(decodeURIComponent(jQuery(".rch_content_data_field_list").val()));jQuery(".rch_export_php_fun").is(":checked")?t.isPhp=!0:t.isPhp=!1,t.phpFun=jQuery(".rch_export_php_fun_data").val(),"undefined"!=t.isDate&&1==t.isDate&&(t.dateType=jQuery(".rch_field_editor_date_field").val(),t.dateFormat=jQuery(".rch_field_editor_date_field_format").val()),"undefined"!=t.UpCrossSell&&(t.UpCrossSell=jQuery(".rch_field_editor_product_options_field").val());var p=encodeURIComponent(JSON.stringify(t));if(jQuery(".rch_fields_title_active").length>0){var r=jQuery(".rch_fields_title_active");r.find(".rch_fields_title").html(e),r.find(".rch_fields_title").attr("field_data",p),r.find(".rch_fields_title").attr("old_field_data",i)}else{var a=rchGenerateFieldsData(p,i,e);jQuery(".rch_field_selection").append(a),jQuery.isFunction(jQuery.fn.sortable)&&jQuery(".rch_field_selection").sortable("refresh"),jQuery.isFunction(jQuery.fn.rch_editable)&&jQuery(".rch_fields_title:not(.rch_editable_container)").each(function(){jQuery(this).addClass("rch_editable_container").rch_editable("click",function(e){})})}}jQuery(".rch_field_editor_model").modal("hide")}),jQuery(document).on("click",".rch_save_template_btn",function(){rchSaveTemplate(0,jQuery(".rch_export_template_name").val())}),jQuery(document).on("click",".rch_update_template_btn",function(){var e=jQuery(".rch_template_list_select").val();if(""===e)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.rchEmptyTemplate),!1;rchSaveTemplate(e,"")}),jQuery(document).on("change",".rch_template_list_select",function(){rchShowLoader();var e=jQuery(this).val();if(""==e)return rchHideLoader(),jQuery(".rch_update_template_btn_wrapper").hide(),!1;jQuery(".rch_update_template_btn_wrapper").show();var i=jQuery(".rch_export_type_select").val();if(""===i)return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),rchHideLoader(),!1;void 0!==rchPluginSettings.rchExportData[i]&&void 0!==rchPluginSettings.rchExportData[i].templateData&&void 0!==rchPluginSettings.rchExportData[i].templateData[e]?rchSetExportTemplate(rchPluginSettings.rchExportData[i].templateData[e]):jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"GET",data:"action=rch_export_get_template_data&template_id="+e,dataType:"json",success:function(t){if("error"==t.status)return rchSetErrorMsg(t.message),rchHideLoader(),!1;"undefined"!=rchPluginSettings.rchExportData[i].templateData&&null!=rchPluginSettings.rchExportData[i].templateData||(rchPluginSettings.rchExportData[i].templateData=[]),rchPluginSettings.rchExportData[i].templateData[e]=t.data,rchSetExportTemplate(rchPluginSettings.rchExportData[i].templateData[e])},error:function(e,i){rchHandleAjaxError(e,i)}}),rchHideLoader()}),jQuery(document).on("change",".rch_content_data_field_list",function(){var e=jQuery(this).find("option:selected").text();jQuery(".rch_field_editor_data").val(e);var i=jQuery.parseJSON(decodeURIComponent(jQuery(this).val()));"undefined"!=i.isDate&&1==i.isDate?jQuery(".rch_field_editor_date_field_wrapper").show():jQuery(".rch_field_editor_date_field_wrapper").hide(),"undefined"==i.metaKey||"_upsell_ids"!=i.metaKey&&"_crosssell_ids"!=i.metaKey?jQuery(".rch_field_editor_product_option_field").hide():jQuery(".rch_field_editor_product_option_field").show()}),jQuery(document).on("click",".rch_migrate_export_data_btn",function(){rchProcessExport(1)}),jQuery(document).on("click",".rch_export_data_btn",function(){rchProcessExport(0)}),jQuery(document).on("click",".rch_export_preview_btn",function(){if(!rchValidateExport())return!1;void 0!==rchPluginSettings.rchExportData.rchPreviewTable&&rchPluginSettings.rchExportData.rchPreviewTable.destroy(),jQuery(".rch_preview").html();var e="<tr>",i={};jQuery(".rch_field_selection .rch_fields_title").each(function(t,p){var r=jQuery(this).html();e+='<th class="rch_preview_header_data rch_preview'+t+'"></th>',i["rch_preview"+t]=r});var t="<thead>"+(e+="</tr>")+"</thead><tfoot>"+e+"</tfoot>";jQuery(".rch_preview").html(t),jQuery.each(i,function(e,i){jQuery("."+e).text(i)}),rchPreviewData()}),jQuery(document).on("change",".rch_field_editor_date_field",function(){"php"==jQuery(this).val()?jQuery(".rch_field_editor_date_field_format_wrapper").show():jQuery(".rch_field_editor_date_field_format_wrapper").hide()}),jQuery(document).on("click",".rch_export_process_close_btn",function(){jQuery(".rch_export_popup_wrapper").modal("hide")}),jQuery(document).on("click",".rch_export_process_pause_btn",function(){jQuery(".rch_process_action").modal({backdrop:"static",keyboard:!1,show:!0}),rchPluginSettings.rchExportData.exportStatus="pause"}),jQuery(document).on("click",".rch_export_bg_process_btn",function(){"pause"==rchPluginSettings.rchExportData.exportStatus&&rchPluginSettings.rchExportData.exportProcess&&4==rchPluginSettings.rchExportData.exportProcess.readyState?rch_update_export_status("bg"):(jQuery(".rch_process_action").modal({backdrop:"static",keyboard:!1,show:!0}),rchPluginSettings.rchExportData.exportStatus="bg")}),jQuery(document).on("click",".rch_export_process_stop_btn",function(){"pause"==rchPluginSettings.rchExportData.exportStatus&&jQuery(".rch_export_popup_wrapper").modal("hide"),rchPluginSettings.rchExportData.exportStatus="stop",jQuery(".rch_process_action").modal("hide"),jQuery(".rch_export_popup_wrapper").modal("hide"),rchPluginSettings.rchExportData.exportProcess&&4!=rchPluginSettings.rchExportData.exportProcess.readyState&&rchPluginSettings.rchExportData.exportProcess.abort()}),jQuery(document).on("click",".rch_export_process_resume_btn",function(){rchPluginSettings.rchExportData.exportStatus="export",jQuery(".rch_export_process_pause_btn").show(),jQuery(".rch_export_process_resume_btn").hide(),rchPluginSettings.rchExportData.exportInterval=setInterval(function(){jQuery(".rch_export_time_elapsed_value").html(rchElapsedTimeString(rchPluginSettings.rchExportData.exportIntervalSec++))},1e3),rchExportAllData()}),jQuery(document).on("click",".rch_export_download_btn",function(){jQuery(".rch_download_export_id").val(rchPluginSettings.rchExportData.rchExportId),jQuery(".rch_file_download_action").submit()}),jQuery(document).on("change",".rch_order_item_sigle_row",function(){jQuery(".rch_order_item_fill_empty_wrapper").slideToggle()}),jQuery(document).on("change",".rch_wpml_lang",function(){if(""==jQuery(".rch_export_type_select").val())return rchSetErrorMsg(rchPluginSettings.rchLocalizeText.selectExportTypeText),!1;rchShowLoader(),rchAddProecess("rchExportRecordCount"),rchExportRecordCount()}),jQuery(document).on("click",".rch_save_scheduled_btn",function(){if(!1===rchValidateExport())return!1;rchShowLoader();var e=jQuery(".rch_export_type_select").val();void 0!==rchPluginSettings.rchExportData[e]&&null!=rchPluginSettings.rchExportData[e]||(rchPluginSettings.rchExportData[e]=[]),rchGetFieldsData();var i=rchGetFieldRuleData(),t=jQuery(".rch_export_frm").serialize();jQuery.ajax({url:rchPluginSettings.rchAjaxURL,type:"POST",data:"action=rch_export_save_schedule_data&"+t+"&rch_filter_rule="+i,dataType:"json",success:function(e){if(rchHideLoader(),"error"==e.status)return rchSetErrorMsg(e.message),!1;rchSetSuccessMsg(e.message)},error:function(e,i){rchHandleAjaxError(e,i)}})}),jQuery(document).on("change",".rch_migrate_package",function(){jQuery(this).is(":checked")&&rchAddAllFields()});